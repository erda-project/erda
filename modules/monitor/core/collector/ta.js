// Copyright (c) 2021 Terminus, Inc.

// This program is free software: you can use, redistribute, and/or modify
// it under the terms of the GNU Affero General Public License, version 3
// or later (AGPL), as published by the Free Software Foundation.

// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE.

// You should have received a copy of the GNU Affero General Public License
// along with this program. If not, see <http://www.gnu.org/licenses/>.

(function(){var global=this;(function(){var i,a,t,u,s;return this.require||(i={},a={},t=function t(e,n){var r=u(n,e),o=u(r,"./index"),n=a[r]||a[o];if(n)return n;if(o=i[r]||i[r=o])return n={id:r,exports:{}},a[r]=n.exports,o(n.exports,function(e){return t(e,s(r))},n),a[r]=n.exports;throw"module "+e+" not found"},u=function(e,t){for(var n,r=[],o=(/^\.\.?(\/|$)/.test(t)?[e,t].join("/"):t).split("/"),i=0,a=o.length;i<a;i++)".."==(n=o[i])?r.pop():"."!=n&&""!=n&&r.push(n);return r.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},this.require=function(e){return t(e,"")},this.require.define=function(e){for(var t in e)i[t]=e[t]},this.require.modules=i,this.require.cache=a),this.require}).call(global);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C,D,E,G;function F(e){return E[e]||"\\u"+(e.charCodeAt(0)+65536).toString(16).substr(1)}window.JSON||(window.JSON={parse:function parse(sJSON){return eval("("+sJSON+")")},stringify:(C=Object.prototype.toString,D=Array.isArray||function(e){return"[object Array]"===C.call(e)},E={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},G=/[\\"\u0000-\u001F\u2028\u2029]/g,function e(t){if(null==t)return"null";if("number"==typeof t)return isFinite(t)?t.toString():"null";if("boolean"==typeof t)return t.toString();if("object"===(void 0===t?"undefined":_typeof(t))){if("function"==typeof t.toJSON)return e(t.toJSON());if(D(t)){for(var n="[",r=0;r<t.length;r++)n+=(r?", ":"")+e(t[r]);return n+"]"}if("[object Object]"===C.call(t)){var o,i=[];for(o in t)t.hasOwnProperty(o)&&i.push(e(o)+": "+e(t[o]));return"{"+i.join(", ")+"}"}}return'"'+t.toString().replace(G,F)+'"'})}),window.performance=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance,window.timing=window.timing||{getTimes:function(e){var t=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance;if(void 0===t)return!1;var n,r,o=t.timing,i={};if(e=e||{},o){if(e&&!e.simple)for(var a in o)!isNaN(parseFloat(o[a]))&&isFinite(o[a])&&(i[a]=parseFloat(o[a]));void 0===i.firstPaint&&(n=0,window.chrome?void 0!==(t=t.getEntriesByType("paint"))&&0<t.length?(r={},t.forEach(function(e){r[e.name]=e.startTime}),i.firstPaintTime=r["first-paint"]):window.chrome.loadTimes&&(n=1e3*window.chrome.loadTimes().firstPaintTime,i.firstPaintTime=n-o.navigationStart):"number"==typeof o.msFirstPaint&&(n=o.msFirstPaint,i.firstPaintTime=n-o.navigationStart),e&&!e.simple&&(i.firstPaint=n)),i.loadTime=o.loadEventEnd-o.fetchStart,i.domReadyTime=o.domComplete-o.domInteractive,i.readyStart=o.fetchStart-o.navigationStart,i.redirectTime=o.redirectEnd-o.redirectStart,i.appcacheTime=o.domainLookupStart-o.fetchStart,i.unloadEventTime=o.unloadEventEnd-o.unloadEventStart,i.lookupDomainTime=o.domainLookupEnd-o.domainLookupStart,i.connectTime=o.connectEnd-o.connectStart,i.reponseTime=o.responseEnd-o.responseStart,i.requestTime=o.responseEnd-o.requestStart,i.initDomTreeTime=o.domInteractive-o.responseEnd,i.scriptExecuteTime=o.domContentLoadedEventEnd-o.domContentLoadedEventStart,i.loadEventTime=o.loadEventEnd-o.loadEventStart}return i}};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Uk(){for(var e=0,t={};e<arguments.length;e++){var n,r=arguments[e];for(n in r)t[n]=r[n]}return t}!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:this).uuidv1=e()}(function(){return function r(o,i,a){function u(n,e){if(!i[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(s)return s(n,!0);t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}t=i[n]={exports:{}};o[n][0].call(t.exports,function(e){var t=o[n][1][e];return u(t||e)},t,t.exports,r,o,i,a)}return i[n].exports}for(var s="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);t.exports=function(e,t){return t=t||0,r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]}},{}],2:[function(e,t,n){var r,o,i="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);i?(r=new Uint8Array(16),t.exports=function(){return i(r),r}):(o=new Array(16),t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o})},{}],3:[function(e,t,n){var d,l,f=e("./lib/rng"),p=e("./lib/bytesToUuid"),m=0,v=0;t.exports=function(e,t,n){var r=t&&n||0,o=t||[],i=(e=e||{}).node||d,a=void 0!==e.clockseq?e.clockseq:l;null!=i&&null!=a||(s=f(),null==i&&(i=d=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=l=16383&(s[6]<<8|s[7])));var u=void 0!==e.msecs?e.msecs:(new Date).getTime(),n=void 0!==e.nsecs?e.nsecs:v+1,s=u-m+(n-v)/1e4;if(s<0&&void 0===e.clockseq&&(a=a+1&16383),(s<0||m<u)&&void 0===e.nsecs&&(n=0),1e4<=n)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=u,l=a,n=(1e4*(268435455&(u+=122192928e5))+(v=n))%4294967296,o[r++]=n>>>24&255,o[r++]=n>>>16&255,o[r++]=n>>>8&255,o[r++]=255&n,u=u/4294967296*1e4&268435455,o[r++]=u>>>8&255,o[r++]=255&u,o[r++]=u>>>24&15|16,o[r++]=u>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var c=0;c<6;++c)o[r+c]=i[c];return t||p(o)}},{"./lib/bytesToUuid":1,"./lib/rng":2}]},{},[3])(3)}),this.require.define({"lib/base-data":function(e,t,n){"use strict";var i=t("./helpers"),a=t("./domain"),u=t("./uuid"),r=t("./"),t=r.browser,r=r.document,s=r.documentPathname(),c=t.userAgent(),d=r.documentDomain(),l={};n.exports={init:function(e){l=e},setUser:function(e){l.udata.uid=e},getOpts:function(){return i.extend({},l)},get:function(){var e=l.ak,t=l.vid,n=l.url,r=l.udata;r.domain=a(l);var o=global.Cookies.get("taid")||u();return i.extend({cid:o,dp:s,dh:d,ua:c,vid:t,url:n,date:Date.now()},r,e?{ak:e}:{})}}}}),this.require.define({"lib/browser/flash-version":function(e,t,n){"use strict";n.exports=function(){var e=0;if(document.all)try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");t&&(t=t.GetVariable("$version"),e=parseInt(t.split(" ")[1].split(",")[0],10))}catch(e){}else if(navigator.plugins&&0<navigator.plugins.length){var n=navigator.plugins["Shockwave Flash"];if(n)for(var r=n.description.split(" "),o=0;o<r.length;++o)isNaN(parseInt(r[o],10))||(e=parseInt(r[o],10))}return e}}}),this.require.define({"lib/browser/is-cookie-enabled":function(e,t,n){"use strict";n.exports=function(){return navigator.cookieEnabled?1:0}}}),this.require.define({"lib/browser/screen-color-depth":function(e,t,n){"use strict";n.exports=function(){return window.screen.colorDepth+"-bit"}}}),this.require.define({"lib/browser/screen-size":function(e,t,n){"use strict";n.exports=function(){var e=window.screen;return e.width+"x"+e.height}}}),this.require.define({"lib/browser/user-agent":function(e,t,n){"use strict";n.exports=function(){return navigator.userAgent}}}),this.require.define({"lib/browser/user-language":function(e,t,n){"use strict";n.exports=function(){return navigator.language||navigator.userLanguage}}}),this.require.define({"lib/browser/window-size":function(e,t,n){"use strict";n.exports=function(){var e=document,t=e.body,e=e.documentElement;return(window.innerWidth||e.clientWidth||t.clientWidth)+"x"+(window.innerHeight||e.clientHeight||t.clientHeight)}}}),this.require.define({"lib/document/document-character-set":function(e,t,n){"use strict";n.exports=function(){var e=document;return e.characterSet||e.charset||e.inputEncoding}}}),this.require.define({"lib/document/document-domain":function(e,t,n){"use strict";n.exports=function(){return document.domain}}}),this.require.define({"lib/document/document-keywords":function(e,t,n){"use strict";n.exports=function(){for(var e=document.getElementsByTagName("meta"),t="",n=0;n<e.length;n++)if("keywords"===e[n].name){t=e[n].content;break}return t}}}),this.require.define({"lib/document/document-pathname":function(e,t,n){"use strict";n.exports=function(){return window.location.pathname}}}),this.require.define({"lib/document/document-referrer":function(e,t,n){"use strict";n.exports=function(){return document.referrer}}}),this.require.define({"lib/document/document-size":function(e,t,n){"use strict";n.exports=function(){var e=document,t=e.body,e=e.documentElement;return Math.max(t.scrollWidth,t.offsetWidth,e.clientWidth,e.scrollWidth,e.offsetWidth)+"x"+Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}}}),this.require.define({"lib/document/document-title":function(e,t,n){"use strict";n.exports=function(){return document.title}}}),this.require.define({"lib/document/document-url":function(e,t,n){"use strict";n.exports=function(){return document.URL}}}),this.require.define({"lib/domain":function(e,t,n){"use strict";n.exports=function(e){return e.udata.domain||window.location.hostname.split(".").slice(-2).join(".")}}}),this.require.define({"lib/events/click":function(e,t,n){"use strict";var r=t("../send-data").requestEvent,o=t("../helpers");n.exports=function(){o.addEventListener(document,"click",function(e){return t=e,n=document,e=n.documentElement.scrollLeft||n.body.scrollLeft,n=n.documentElement.scrollTop||n.body.scrollTop,e=t.pageX||t.clientX+e,n=t.pageY||t.clientY+n,void r({xp:o.getXPath(t.target||t.srcElement).join("/"),x:e,y:n});var t,n})}}}),this.require.define({"lib/events/error":function(e,t,n){"use strict";var r=t("../send-data").requestLoadError,o=t("../helpers");n.exports=function(e){var t=e.target,n="";switch(t.nodeName){case"LINK":n=t.href;break;case"SCRIPT":case"IMG":n=t.src}r({xp:o.getXPath(t||e.srcElement).join("/"),nn:t.nodeName,sr:n})}}}),this.require.define({"lib/events/init":function(e,t,n){"use strict";var r=t("../send-data").requestBrowser;n.exports=function(){var e=t("../base-data").get();global.Cookies.get("taid")||(global.Cookies.set("taid",e.cid,{expires:730,domain:e.domain}),r())}}}),this.require.define({"lib/events/location":function(e,t,n){"use strict";var i=t("../send-data").requestDocument,a=t("../performance/spa-timing"),s=t("../ie-version"),c=t("../helpers");n.exports=function(){var e,u,t,n,r,o;window.history.pushState&&(e=window.MutationObserver,u=Event,s.version&&9<=s.version&&s.version<=11&&((o=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}).prototype=window.Event.prototype,u=o),o=function(i){var a=window.history[i];return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=a.apply(this,t),o=new u(i);return o.arguments=t,window.dispatchEvent(o),r}},window.history.pushState=o("pushState"),window.history.replaceState=o("replaceState"),t=!1,n=window.location,r=n.href,o=function(){i({lc:+(r!==n.href)}),r=n.href,e&&(t=!0,a.onEventStart())},c.addEventListener(window,"pushState",o),c.addEventListener(window,"replaceState",o),c.addEventListener(window,"popstate",o),e&&new window.MutationObserver(function(){t&&(a.onEventEnd(),t=!1)}).observe(document.body,{childList:!0,subtree:!0,characterData:!0}))}}}),this.require.define({"lib/events/onload":function(e,n,t){"use strict";var r=n("../").performance,o=n("../send-data"),i=o.requestDocument,a=o.requestTiming,u=n("../helpers");t.exports=function(e){u.windowOnload(window,function(){setTimeout(function(){var e=r.navigationTiming(),t=r.resourceTiming();a({nt:e,rt:JSON.stringify(t)});t=n("../base-data").getOpts();i(t.ck?{ck:document.cookie}:void 0)},0)})}}}),this.require.define({"lib/events/unload":function(e,t,n){"use strict";var r=t("../helpers"),o=t("../send-data").requestDocument;n.exports=function(){var t=void 0;r.windowOnload(window,function(){setTimeout(function(){t=Date.now()},0)}),r.addEventListener(window,"beforeunload",function(){var e=Math.round((Date.now()-t)/1e3);o({tp:e,lc:0})})}}}),this.require.define({"lib/helpers":function(e,t,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a={},i=Object.keys,u=Object.prototype,s=u.hasOwnProperty,c=(r="length",function(e){return null==e?void 0:e[r]}),d=Math.pow(2,53)-1;"function"!=typeof/./&&"object"!==("undefined"==typeof Int8Array?"undefined":o(Int8Array))&&(a.isFunction=function(e){return"function"==typeof e||!1});var l=!{toString:null}.propertyIsEnumerable("toString"),f=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function p(e,t){var n=f.length,r=e.constructor,o=a.isFunction(r)&&r.prototype||u,i="constructor";for(a.has(e,i)&&!a.contains(t,i)&&t.push(i);n--;)(i=f[n])in e&&e[i]!==o[i]&&!a.contains(t,i)&&t.push(i)}var m,v;a.allKeys=function(e){if(!a.isObject(e))return[];var t,n=[];for(t in e)n.push(t);return l&&p(e,n),n},a.extend=(m=a.allKeys,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.length,o=t[0]||null;if(r<2||null==o)return o;for(var i=1;i<r;i++)for(var a=t[i],u=m(a),s=u.length,c=0;c<s;c++){var d=u[c];v&&void 0!==o[d]||(o[d]=a[d])}return o}),a.isNaN=function(e){return"number"==typeof e&&e!==+e},a.values=function(e){for(var t=a.keys(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e[t[o]];return r},a.contains=a.includes=a.include=function(e,t,n,r){return function(e){e=c(e);return"number"==typeof e&&0<=e&&e<=d}(e)||(e=a.values(e)),"number"==typeof n&&!r||(n=0),0<=a.indexOf(e,t,n)},a.keys=function(e){if(!a.isObject(e))return[];if(i)return i(e);var t,n=[];for(t in e)a.has(e,t)&&n.push(t);return l&&p(e,n),n},a.isObject=function(e){var t=void 0===e?"undefined":o(e);return"function"===t||"object"===t&&!!e},a.has=function(e,t){return null!=e&&s.call(e,t)},a.addEventListener=function(e,t,n,r){document.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,r)},a.windowOnload=function(e,t){var n=e.document;n.readyState&&"complete"===n.readyState?t():a.addEventListener(e,"load",t)};var h=/^data:.*?\;base64\,.*?==$/i;a.isBase64=function(e){return h.test(e)};function y(e,t){var n,r=0;if(t=t||[],e.parentNode&&(t=y(e.parentNode,t)),e.previousSibling){r=1;for(var o=e.previousSibling;1===o.nodeType&&o.nodeName===e.nodeName&&r++,o=o.previousSibling,o;);1===r&&(r=null)}else if(e.nextSibling)for(var i=e.nextSibling;i=1===i.nodeType&&i.nodeName===e.nodeName?(r=1,null):(r=null,i.previousSibling),i;);return 1===e.nodeType&&(n="",e.id&&(n+="[@id='"+e.id+"']"),null!==e.getAttribute("class")&&(n+="[@class='"+e.getAttribute("class")+"']"),n+=0<r?"["+r+"]":"",t.push(e.nodeName.toLowerCase()+n)),t}a.getXPath=y,n.exports=a}}),this.require.define({"lib/ie-version":function(e,t,n){"use strict";var r=window,o=r.document,i=o.createElement("input"),a=void 0===r.ActiveXObject?null:r.XMLHttpRequest?o.querySelector?o.addEventListener?r.atob?i.dataset?11:10:9:8:7:6,u=!1;if(a&&o.documentMode)try{i.style.behavior="url(#default#clientcaps)",u=o.documentMode!==r.parseInt(i.getComponentVersion("{45EA75A0-A269-11D1-B5BF-0000F8051515}","componentid"))}catch(e){}n.exports={version:a,emulated:!!a&&u}}}),this.require.define({"lib/index":function(e,t,n){"use strict";n.exports={browser:{isCookieEnabled:t("./browser/is-cookie-enabled"),userAgent:t("./browser/user-agent"),userLanguage:t("./browser/user-language"),windowSize:t("./browser/window-size"),screenSize:t("./browser/screen-size"),screenColorDepth:t("./browser/screen-color-depth"),flashVersion:t("./browser/flash-version")},document:{documentSize:t("./document/document-size"),documentTitle:t("./document/document-title"),documentReferrer:t("./document/document-referrer"),documentUrl:t("./document/document-url"),documentCharacterSet:t("./document/document-character-set"),documentPathname:t("./document/document-pathname"),documentDomain:t("./document/document-domain"),documentKeywords:t("./document/document-keywords")},performance:{navigationTiming:t("./performance/navigation-timing"),resourceTiming:t("./performance/resource-timing")}}}}),this.require.define({"lib/log/log-ajax":function(e,t,n){"use strict";var i=t("../send-data").requestAjax;n.exports=function(){var r=XMLHttpRequest.prototype.open,o=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.method=t[0].toLowerCase(),this.url=t[1],r.apply(this,t),this.setRequestHeader("terminus-request-id",uuidv1())},XMLHttpRequest.prototype.send=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];this.startTime=Date.now();"function"==typeof window.addEventListener&&this.addEventListener("readystatechange",function(){var e;2===t.readyState&&(t.sendTime=Date.now()),3===t.readyState&&(t.loadTime=Date.now()),4===t.readyState&&(e=Date.now(),i({tt:e-t.startTime,url:t.url,st:t.status,me:t.method,req:JSON.stringify(n||"").length/1024,res:JSON.stringify(t.response||t.reponseText||"").length/1024}))}),o.apply(this,n)}}}}),this.require.define({"lib/log/log-exec":function(e,t,n){"use strict";var f=t("../send-data").requestAjaxError;n.exports=function(u,s,c,d,l){return"Script error."!==u&&s&&setTimeout(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];d=d||window.event&&window.event.errorCharacter||0;var r="";if(l&&l.stack)r=l.stack.toString();else if(t.callee){for(var o=[],i=t.callee.caller,a=3;i&&0<--a&&(o.push(i.toString()),i!==i.caller);)i=i.caller;r=o=o.join(",")}f({ers:s,erm:u,erl:c,erc:d,sta:r})},0),!1}}}),this.require.define({"lib/performance/navigation-timing":function(e,t,n){"use strict";var r=t("./utility");n.exports=function(){return r.compressNavigationTiming(window.timing.getTimes())}}}),this.require.define({"lib/performance/resource-timing":function(e,t,n){"use strict";var r=t("./utility");n.exports=function(){return window.performance&&window.performance.getEntriesByType?r.compressResourceTiming(window.performance.getEntriesByType("resource")):{}}}}),this.require.define({"lib/performance/spa-timing":function(e,t,n){"use strict";var r=t("./utility"),o=t("../send-data").requestTiming,i={};n.exports={onEventStart:function(){i.startTime=Date.now()},onEventEnd:function(){i.endTime=Date.now();var e=i.endTime-i.startTime;o({nt:r.compressNavigationTiming({loadTime:e})})}}}}),this.require.define({"lib/performance/utility":function(e,t,n){"use strict";function E(t,e){var n,r=0,o=void 0,i=void 0,a=[];k.keys(t).forEach(function(e){t.hasOwnProperty(e)&&a.push(e)});for(var u=0;u<a.length;u++)o=a[u],"object"===s(t[o])&&(n=E(t[o],!1))&&(delete t[o],o+=n.name,t[o]=n.value),r++;return 1===r?e?((i={})[o]=t[o],i):{name:o,value:t[o]}:!!e&&t}function q(e){for(var t,n=[],r=0;r<e.length;r++)n.push("number"==typeof(t=e[r])&&0!==t?t.toString(36):"string"==typeof t?t:"");return n}function T(e,t){return"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),e=Math.round(e),t=Math.round(t),0===e?0:e-t}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=t("../helpers"),O={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,iframe:6,image:7};n.exports={compressResourceTiming:function(e){for(var n,r,o,i,a,u,s,t={},c=0;c<e.length;c++){var d=e[c],l=d.name,f=d.initiatorType,p=d.startTime,m=d.responseEnd,v=d.responseStart,h=d.requestStart,y=d.connectEnd,b=d.secureConnectionStart,g=d.connectStart,w=d.domainLookupEnd,x=d.domainLookupStart,S=d.redirectEnd,d=d.redirectStart;k.isBase64(l)||t[l]||(p=(O[f]||0)+q([T(p),T(m,p),T(v,p),T(h,p),T(y,p),T(b,p),T(g,p),T(w,p),T(x,p),T(S,p),T(d,p)]).join(",").replace(/,+$/,""),t[l]=p)}return t=E((n=t,u={},s=void 0,k.keys(n).forEach(function(e){if(n.hasOwnProperty(e)&&!(150<e.length)){r=n[e],o=e.split(""),s=u;for(var t=0;t<o.length;t++)i=o[t],void 0===(a=s[i])?s=s[i]=t===o.length-1?r:{}:"string"==typeof a?s=s[i]={"|":a}:t===o.length-1?s[i]["|"]=r:s=s[i]}}),u),!0)},compressNavigationTiming:function(e){var t=e.loadTime,n=e.readyStart,r=e.domReadyTime,o=e.scriptExecuteTime,i=e.requestTime,a=e.reponseTime,u=e.initDomTreeTime,s=e.loadEventTime,c=e.unloadEventTime,d=e.appcacheTime,l=e.connectTime,f=e.lookupDomainTime,e=e.redirectTime;return q([t,n,r,o,i,a,u,s,c,d,l,f,e]).join(",").replace(/,+$/,"")}}}}),this.require.define({"lib/polyfill":function(e,t,n){"use strict";n.exports=function(){Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=this.length;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],r=0;r<t;r++)r in this&&e.call(n,this[r],r,this)})}}}),this.require.define({"lib/request":function(e,a,t){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function n(e,t){var n,r={};for(n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var u=a("./helpers"),s=a("./ie-version");void 0===window.XMLHttpRequest&&(window.XMLHttpRequest=function(){for(var e=["Microsoft","msxm3","msxml2","msxml1"],t=0;t<e.length;t++)try{return new ActiveXObject(e[t]+".XMLHTTP")}catch(e){}});function c(t){var n=[];return u.keys(t).forEach(function(e){n.push(p(e)+"="+p(t[e]))}),n.join("&")}function d(e){var t,n=(i=a("./base-data").get()).ak,r=i.cid,o=i.uid,i=i.url,r={data:e,cid:r};void 0!==n&&(r.ak=n),void 0!==o&&(r.uid=o),s.version&&s.version<10?function(e,n){var r=document,t=r.createElement("iframe"),o="terminus-analytics-"+Date.now();r.body.appendChild(t),t.style.display="none",t.contentWindow.name=o;var i=r.createElement("form");i.target=o,i.style.display="none",i.action=e,i.method="POST",u.keys(n).forEach(function(e){var t=r.createElement("input");t.type="hidden",t.name=e,t.value=n[e],i.appendChild(t)}),r.body.appendChild(i),i.submit(),u.addEventListener(t,"load",function(){r.body.removeChild(i),r.body.removeChild(t)})}(i,r):(o=i,i=c(r),r="application/x-www-form-urlencoded; charset=UTF-8",navigator.sendBeacon&&Blob?(t=new Blob([i],{type:r}),navigator.sendBeacon(o,t)):(t=new XMLHttpRequest,l.call(t,"POST",o,!0),t.setRequestHeader("Content-type",r),f.call(t,i)))}var l=XMLHttpRequest.prototype.open,f=XMLHttpRequest.prototype.send,p=encodeURIComponent;t.exports={requestCustom:function(e){var r=e.data,e=n(e,["data"]),o=c(e).split("&");u.keys(r).forEach(function(t){var n=r[t];u.isObject(n)&&u.keys(n).forEach(function(e){-1<["string","number","boolean"].indexOf(i(n[e]))&&o.push(t+"="+p(e)+"="+p(n[e]))})}),d(o.join("&"))},requestData:function(e){var t=a("./base-data").get(),t=(t.ak,t.cid,t.uid,t.url,n(t,["ak","cid","uid","url"]));d(c(u.extend(e,t)))}}}}),this.require.define({"lib/send-data":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=(t("./helpers"),t("./")),i=o.browser,a=o.document,t=t("./request"),u=t.requestData,s=t.requestCustom;n.exports={requestDocument:function(e){e=0<arguments.length&&void 0!==e?e:{};u(r({t:"document",dt:a.documentTitle(),ds:a.documentSize(),dr:a.documentReferrer(),dl:a.documentUrl(),de:a.documentCharacterSet(),dp:a.documentPathname(),dh:a.documentDomain(),dk:a.documentKeywords(),lc:1},e))},requestBrowser:function(){u({t:"browser",ce:i.isCookieEnabled(),vp:i.windowSize(),ua:i.userAgent(),ul:i.userLanguage(),sr:i.screenSize(),sd:i.screenColorDepth(),fl:i.flashVersion()})},requestTiming:function(e){u(r({t:"timing"},0<arguments.length&&void 0!==e?e:{}))},requestEvent:function(e){u(r({t:"event"},0<arguments.length&&void 0!==e?e:{}))},requestLoadError:function(e){u(r({t:"loadError"},0<arguments.length&&void 0!==e?e:{}))},requestAjax:function(e){u(r({t:"request"},0<arguments.length&&void 0!==e?e:{}))},requestAjaxError:function(e){u(r({t:"error"},0<arguments.length&&void 0!==e?e:{}))},requestMetric:function(e,t){t=1<arguments.length&&void 0!==t?t:{};s({t:"metric",n:e,date:Date.now(),data:t})}}}}),this.require.define({"lib/uuid":function(e,t,n){"use strict";n.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}}),global.Cookies=function e(l){function f(e,t,n){var r,o;if("undefined"!=typeof document){if(1<arguments.length){"number"==typeof(n=Uk({path:"/"},f.defaults,n)).expires&&((o=new Date).setMilliseconds(o.getMilliseconds()+864e5*n.expires),n.expires=o);try{r=JSON.stringify(t),/^[\{\[]/.test(r)&&(t=r)}catch(e){}return t=l.write?l.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[e,"=",t,n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}e||(r={});for(var i=document.cookie?document.cookie.split("; "):[],a=/(%[0-9A-Z]{2})+/g,u=0;u<i.length;u++){var s=i[u].split("="),c=s.slice(1).join("=");'"'===c.charAt(0)&&(c=c.slice(1,-1));try{var d=s[0].replace(a,decodeURIComponent);if(c=l.read?l.read(c,d):l(c,d)||c.replace(a,decodeURIComponent),this.json)try{c=JSON.parse(c)}catch(e){}if(e===d){r=c;break}e||(r[d]=c)}catch(e){}}return r}}f.set=f;f.get=function(e){return f.call(f,e)};f.getJSON=function(){return f.apply({json:!0},[].slice.call(arguments))};f.defaults={};f.remove=function(e,t){f(e,"",Uk(t,{expires:-1}))};f.withConverter=e;return f}(function(){}),window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,this.require.define({ta:function(e,n,t){"use strict";var r=n("./lib/helpers"),o=n("./lib/uuid"),i=n("./lib/ie-version");t.exports=function(e){var t={policy:"blacklist",path:[],vid:o(),url:"//analytics.terminus.io/collect",udata:{},ck:!1};i.version&&i.version<8||(n("./lib/polyfill")(),e=r.extend(t,e),n("./lib/base-data").init(e),n("./lib/events/init")(e),n("./lib/events/unload")(e),n("./lib/events/click")(e),n("./lib/log/log-ajax")(e),n("./lib/events/onload")(e),n("./lib/events/location")(e))}}}),function(){function e(e){var t=(e=(t=e,Array.prototype.slice.call(t))).shift();r[t].apply(r,e)}function t(){o.forEach(e),o.length=0,o.push=e}var n=global.require,r={start:function(){n("ta").apply(null,arguments)},setUser:function(){n("lib/base-data").setUser.apply(null,arguments)},sendError:function(){n("lib/events/error").apply(null,arguments)},sendExecError:function(){n("lib/log/log-exec").apply(null,arguments)},send:function(){n("lib/send-data").requestMetric.apply(null,arguments)}},o=$ta.q;o.push=function(e){"start"===e[0]?(o.unshift(e),t()):Array.prototype.push.call(o,e)};for(var i,a=-1,u=0;u<o.length;u++)if("start"===o[u][0]){a=u;break}-1<a&&(i=o.splice(a,1)[0],o.push(i),t())}.call()}).call({});
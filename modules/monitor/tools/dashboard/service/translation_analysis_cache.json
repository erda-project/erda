
{
  "id": "translation_analysis_cache",
  "name": "translation_analysis_cache",
  "desc": "",
  "viewconfig":[
    {
      "w":11,
      "h":9,
      "x":0,
      "y":0,
      "i":"view-1XA1pzWR",
      "view":{
        "title":"服务请求",
        "description":"",
        "chartType":"chart:bar",
        "dataSourceType":"api",
        "staticData":{

        },
        "config":{
          "optionProps":{
            "isMoreThanOneDay":true,
            "moreThanOneDayFormat":"YYYY/MM/DD"
          },
          "dataSourceConfig":{
            "activedMetricGroups":[
              "application_cache",
              "application_cahce_request"
            ],
            "typeDimensions":[
              {
                "alias":"时间",
                "key":"typegq99wZs2",
                "timeFormat":"YYYY/MM/DD",
                "timeInterval":{
                  "unit":"m",
                  "value":1
                },
                "type":"time"
              }
            ],
            "valueDimensions":[
              {
                "aggregation":"count",
                "alias":"请求次数",
                "field":"application_cache-elapsed_count::field",
                "key":"valueSR6vrde7",
                "resultType":"number",
                "type":"field"
              }
            ]
          }
        },
        "api":{
          "url":"/api/tmc/metrics-query",
          "query":{
            "end":"{{endTime}}",
            "epoch":"ms",
            "filter__metric_scope":"micro_service",
            "filter__metric_scope_id":"{{terminusKey}}",
            "filter_terminus_key": "{{terminusKey}}",
            "serviceName": "{{serviceName}}",
            "filter_source_service_id":"{{serviceId}}",
            "format":"chartv2",
            "ql":"influxql:ast",
            "start":"{{startTime}}",
            "type":"_",
            "search": "{{search}}"
          },
          "body":{
            "from":[
              "application_cache"
            ],
            "groupby":[
              "time(1m)"
            ],
            "select":[
              {
                "alias":"typegq99wZs2",
                "expr":"time()"
              },
              {
                "alias":"valueSR6vrde7",
                "expr":"round_float(count(elapsed_count::field), 2)"
              }
            ],
            "where":[
              "db_statement::tag=~/.*{{subSearch}}.*/"
            ]
          },
          "header":null,
          "extraData":null,
          "method":"post"
        },
        "controls":null
      }
    },
    {
      "w":13,
      "h":9,
      "x":11,
      "y":0,
      "i":"view-J4SwjHDP",
      "view":{
        "title":"请求延迟",
        "description":"",
        "chartType":"chart:line",
        "dataSourceType":"api",
        "staticData":{

        },
        "config":{
          "optionProps":{
            "isMoreThanOneDay":true,
            "moreThanOneDayFormat":"YYYY/MM/DD",
            "noAreaColor":true
          },
          "dataSourceConfig":{
            "activedMetricGroups":[
              "application_cache",
              "application_cache_request"
            ],
            "typeDimensions":[
              {
                "alias":"时间",
                "key":"typeQuPvs7M2",
                "timeFormat":"YYYY/MM/DD",
                "timeInterval":{
                  "unit":"m",
                  "value":1
                },
                "type":"time"
              }
            ],
            "valueDimensions":[
              {
                "aggregation":"avg",
                "alias":"平均响应时间",
                "field":"application_cache-elapsed_mean::field",
                "key":"valueCxbcWuWT",
                "resultType":"number",
                "type":"field",
                "unit":{
                  "type":"TIME",
                  "unit":"ns"
                }
              }
            ]
          }
        },
        "api":{
          "url":"/api/tmc/metrics-query",
          "query":{
            "end":"{{endTime}}",
            "epoch":"ms",
            "filter__metric_scope":"micro_service",
            "filter__metric_scope_id":"{{terminusKey}}",
            "filter_terminus_key": "{{terminusKey}}",
            "serviceName": "{{serviceName}}",
            "filter_source_service_id":"{{serviceId}}",
            "format":"chartv2",
            "ql":"influxql:ast",
            "start":"{{startTime}}",
            "type":"_"
          },
          "body":{
            "from":[
              "application_cache"
            ],
            "groupby":[
              "time(1m)"
            ],
            "select":[
              {
                "alias":"typeQuPvs7M2",
                "expr":"time()"
              },
              {
                "alias":"valueCxbcWuWT",
                "expr":"round_float(avg(elapsed_mean::field), 2)"
              }
            ],
            "where":[
              "db_statement::tag=~/.*{{subSearch}}.*/"
            ]
          },
          "header":null,
          "extraData":null,
          "method":"post"
        },
        "controls":null
      }
    },
    {
      "w":24,
      "h":10,
      "x":0,
      "y":9,
      "i":"view-lVTYdASX",
      "view":{
        "title":"缓存调用",
        "description":"",
        "chartType":"table",
        "dataSourceType":"api",
        "staticData":{
        },
        "config":{
          "optionProps":{
            "isMoreThanOneDay":true,
            "moreThanOneDayFormat":"M/D",
            "rowClick": {
              "name": "searchTranslation",
              "value": "operation"
            }
          },
          "dataSourceConfig": {
            "valueDimensions": [
              {
                "alias": "执行语句",
                "key": "operation",
                "resultType": "string",
                "type": "field"
              },
              {
                "alias": "缓存类型",
                "key": "db_type",
                "resultType": "string",
                "type": "field"
              },
              {
                "alias": "缓存实例",
                "key": "db_instance",
                "resultType": "string",
                "type": "field"
              },
              {
                "alias": "缓存地址",
                "key": "db_host",
                "resultType": "string",
                "type": "field"
              },
              {
                "alias": "调用次数",
                "key": "call_count",
                "resultType": "number",
                "type": "field"
              },
              {
                "alias": "慢调用次数",
                "key": "slow_elapsed_count",
                "resultType": "number",
                "type": "field"
              },
              {
                "alias": "平均延迟",
                "key": "avg_elapsed",
                "resultType": "string",
                "type": "field"
              }
            ]
          }
        },
        "api":{
          "url":"/api/apm/topology/translation/db",
          "query":{
            "end":"{{endTime}}",
            "terminusKey":"{{terminusKey}}",
            "start":"{{startTime}}",
            "layer":"cache",
            "filterServiceName":"{{serviceName}}",
            "serviceId":"{{serviceId}}",
            "search": "{{search}}",
            "sort": "{{sort}}"
          },
          "body":null,
          "header":null,
          "extraData":null,
          "method":"get"
        },
        "controls":null
      }
    }
  ],
  "version": "v2"
}
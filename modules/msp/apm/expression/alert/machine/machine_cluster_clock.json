{
  "name": "机器时钟一致性异常告警",
  "alert_scope": "org",
  "attributes": {
    "level": "WARNING",
    "recover": "true",
    "display_url_id": "machine_cluster_clock",
    "alert_group": "{{cluster_name}}-{{host_ip}}",
    "tickets_metric_key": "{{host_ip}}"
  },
  "template": {
    "metric": "cluster_clock",
    "window": 5,
    "filters": [
      {
        "tag": "cluster_name",
        "operator": "in",
        "value": [
          "$cluster_name"
        ]
      }
    ],
    "group": [
      "cluster_name",
      "host_ip"
    ],
    "functions": [
      {
        "aggregator": "avg",
        "field": "elapsed_abs",
        "operator": "gte",
        "value": 5000
      },
      {
        "aggregator": "avg",
        "field": "send_timestamp",
        "alias": "send_timestamp"
      },
      {
        "aggregator": "avg",
        "field": "receive_timestamp",
        "alias": "receive_timestamp"
      }
    ],
    "select": {
      "cluster_name": "#cluster_name",
      "host_ip": "#host_ip",
      "source_host_ip": "#source_host_ip",
      "_meta": "#_meta",
      "_metric_scope": "#_metric_scope",
      "_metric_scope_id": "#_metric_scope_id",
      "org_name": "#org_name",
      "labels": "#labels"
    },
    "outputs": [
      "alert"
    ]
  }
}
-- MIGRATION_BASE

-- maintainer: jiangwenming
-- added time: 2021/06/07
-- filename: 4.0/migrations/monitor/v006/sp_dashboard_block_system.sql

REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("process_analysis_java","process_analysis_java","","micro_service","global","v2",'[{"h":10,"i":"view-gsdGSmsE","view":{"api":{"body":{"from":["docker_container_summary"],"groupby":["time()"],"select":[{"alias":"typeoQEtA1Qu","expr":"time()"},{"alias":"valuea5DMGiam","expr":"avg(cpu_usage_percent::field)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["docker_container_summary"],"typeDimensions":[{"alias":"时间","key":"typeoQEtA1Qu","type":"time"}],"valueDimensions":[{"alias":"core","key":"valuea5DMGiam","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"容器CPU"},"w":12,"x":0,"y":0},{"h":10,"i":"view-Vk0NhIvt","view":{"api":{"body":{"from":["docker_container_summary"],"groupby":["time()"],"select":[{"alias":"typeSf2rck4P","expr":"time()"},{"alias":"valuektRpqNyO","expr":"round_float(avg(mem_limit::field), 2)"},{"alias":"value9IeT8Ivv","expr":"round_float(avg(mem_usage::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["other","other@docker_container_summary"],"typeDimensions":[{"alias":"时间","key":"typeSf2rck4P","type":"time"}],"valueDimensions":[{"alias":"最大值","field":"docker_container_summary-mem_limit::field","key":"valuektRpqNyO","resultType":"number","type":"field","unit":{"type":"CAPACITY","unit":"B"}},{"alias":"已使用","field":"docker_container_summary-mem_usage::field","key":"value9IeT8Ivv","resultType":"number","type":"field","unit":{"type":"CAPACITY","unit":"B"}}]},"optionProps":{"invalidToZero":true,"isMoreThanOneDay":false,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"容器内存"},"w":12,"x":12,"y":0},{"h":10,"i":"view-U78akBad","view":{"api":{"body":{"from":["jvm_memory"],"groupby":["time()"],"select":[{"alias":"typeIt2X6865","expr":"time()"},{"alias":"valuev2DC9jNb","expr":"round_float(avg(committed::field), 2)"},{"alias":"valueJhgg5Uip","expr":"round_float(avg(init::field), 2)"},{"alias":"valuedifJjsMY","expr":"round_float(max(max::field), 2)"},{"alias":"valuePZCpX3nr","expr":"round_float(avg(used::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","eq_name":"heap_memory","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_jvm","application_jvm_memory","application_jvm_memory_heap"],"typeDimensions":[{"alias":"时间","key":"typeIt2X6865","type":"time"}],"valueDimensions":[{"aggregation":"avg","alias":"已提交","field":"jvm_memory-committed::field","key":"valuev2DC9jNb","resultType":"number","type":"field"},{"aggregation":"avg","alias":"Init","field":"jvm_memory-init::field","key":"valueJhgg5Uip","resultType":"number","type":"field"},{"aggregation":"max","alias":"最大值","field":"jvm_memory-max::field","key":"valuedifJjsMY","resultType":"number","type":"field"},{"aggregation":"avg","alias":"已使用","field":"jvm_memory-used::field","key":"valuePZCpX3nr","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"Heap Memory Usage"},"w":12,"x":0,"y":10},{"h":10,"i":"view-lgddxxPr","view":{"api":{"body":{"from":["jvm_memory"],"groupby":["time()"],"select":[{"alias":"typeM0DAUMLM","expr":"time()"},{"alias":"value8nx5VIig","expr":"round_float(avg(used::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","eq_name":"non_heap_memory","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_jvm","application_jvm_memory","application_jvm_memory_non_heap"],"typeDimensions":[{"alias":"时间","key":"typeM0DAUMLM","type":"time"}],"valueDimensions":[{"alias":"已使用","field":"jvm_memory-used::field","key":"value8nx5VIig","resultType":"number","type":"field","unit":{"type":"CAPACITY","unit":"B"}}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"Non Heap Memory Usage"},"w":12,"x":12,"y":10},{"h":10,"i":"view-246IruiQ","view":{"api":{"body":{"from":["jvm_memory"],"groupby":["time()"],"select":[{"alias":"typePnIyzrBO","expr":"time()"},{"alias":"valueIXILX6JH","expr":"round_float(avg(used::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","match_name":"*_eden_space","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_jvm","application_jvm_memory","application_jvm_memory_ps_eden_space"],"typeDimensions":[{"alias":"时间","key":"typePnIyzrBO","type":"time"}],"valueDimensions":[{"alias":"已使用","field":"jvm_memory-used::field","key":"valueIXILX6JH","resultType":"number","type":"field","unit":{"type":"CAPACITY","unit":"B"}}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"Eden Space"},"w":8,"x":0,"y":20},{"h":10,"i":"view-AzNTzbgm","view":{"api":{"body":{"from":["jvm_memory"],"groupby":["time()"],"select":[{"alias":"typeqDJ0hjqO","expr":"time()"},{"alias":"valueNQr0xQ5n","expr":"round_float(avg(used::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","match_name":"*_old_gen","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_jvm","application_jvm_memory","application_jvm_memory_ps_old_gen"],"typeDimensions":[{"alias":"时间","key":"typeqDJ0hjqO","type":"time"}],"valueDimensions":[{"alias":"已使用","field":"jvm_memory-used::field","key":"valueNQr0xQ5n","resultType":"number","type":"field","unit":{"type":"CAPACITY","unit":"B"}}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"Old Gen"},"w":8,"x":16,"y":20},{"h":10,"i":"view-gXyQwxmE","view":{"api":{"body":{"from":["jvm_memory"],"groupby":["time()"],"select":[{"alias":"typeWqvqa3pT","expr":"time()"},{"alias":"value8pbaaXGT","expr":"round_float(avg(used::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","match_name":"*_survivor_space","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_jvm","application_jvm_memory","application_jvm_memory_ps_surv_space"],"typeDimensions":[{"alias":"时间","key":"typeWqvqa3pT","type":"time"}],"valueDimensions":[{"alias":"已使用","field":"jvm_memory-used::field","key":"value8pbaaXGT","resultType":"number","type":"field","unit":{"type":"CAPACITY","unit":"B"}}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"Survivor Space"},"w":8,"x":8,"y":20},{"h":10,"i":"view-BgAJVZTt","view":{"api":{"body":{"from":["jvm_gc"],"groupby":["time()"],"select":[{"alias":"type4FgUqNtu","expr":"time()"},{"alias":"valueH6A96SuL","expr":"round_float(sum(count::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_jvm","application_jvm_gc"],"isSqlMode":false,"typeDimensions":[{"alias":"时间","key":"type4FgUqNtu","type":"time"}],"valueDimensions":[{"aggregation":"sum","alias":"次数","field":"jvm_gc-count::field","key":"valueH6A96SuL","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"nullDisplay":"0"}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"GC Count"},"w":12,"x":0,"y":30},{"h":10,"i":"view-IrIuKRNn","view":{"api":{"body":{"from":["jvm_gc"],"groupby":["time()"],"select":[{"alias":"typeiQWQLJIb","expr":"time()"},{"alias":"valuedEta7U24","expr":"round_float(avg(time::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_jvm","application_jvm_gc"],"isSqlMode":false,"typeDimensions":[{"alias":"时间","key":"typeiQWQLJIb","type":"time"}],"valueDimensions":[{"aggregation":"avg","alias":"时间","field":"jvm_gc-time::field","key":"valuedEta7U24","resultType":"number","type":"field","unit":{"type":"TIME","unit":"ms"}}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"isLabel":false,"nullDisplay":"0"}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"GC Avg Time"},"w":12,"x":12,"y":30},{"h":10,"i":"view-BMxjOM9K","view":{"api":{"body":{"from":["jvm_class_loader"],"groupby":["time()"],"select":[{"alias":"typefmoF7423","expr":"time()"},{"alias":"value9xCtZWjF","expr":"round_float(avg(loaded::field), 2)"},{"alias":"unloaded","expr":"round_float(avg(unloaded::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["jvm_class_loader"],"typeDimensions":[{"alias":"时间","key":"typefmoF7423","type":"time"}],"valueDimensions":[{"alias":"loaded","key":"value9xCtZWjF","resultType":"number","type":"field"},{"alias":"unloaded","key":"unloaded","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"Class Count"},"w":12,"x":0,"y":30},{"h":10,"i":"view-xRTxHcRk","view":{"api":{"body":{"from":["jvm_thread"],"groupby":["time()","name::tag"],"select":[{"alias":"typee8m4zICn","expr":"time()"},{"alias":"typeQ4CnDlec","expr":"name::tag"},{"alias":"valuerNVC3hQN","expr":"round_float(avg(state::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_jvm","application_jvm_thread"],"typeDimensions":[{"alias":"时间","key":"typee8m4zICn","type":"time"},{"alias":"名称","field":"jvm_thread-name::tag","key":"typeQ4CnDlec","resultType":"string","type":"field"}],"valueDimensions":[{"aggregation":"count","alias":"State","field":"jvm_thread-state::field","key":"valuerNVC3hQN","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isMoreThanOneDay":false,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"JVM Thread"},"w":12,"x":12,"y":30},{"h":10,"i":"view-VBpDgZEB","view":{"api":{"body":{"from":["docker_container_summary"],"groupby":["time()"],"select":[{"alias":"typefJayqUa2","expr":"time()"},{"alias":"valuevcb3aWnu","expr":"round_float(diffps(blk_reads_bytes::field), 2)"},{"alias":"value5hQ0Ce2S","expr":"round_float(diffps(blk_writes_bytes::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["docker_container_summary"],"typeDimensions":[{"alias":"时间","key":"typefJayqUa2","type":"time"}],"valueDimensions":[{"alias":"读取","key":"valuevcb3aWnu","resultType":"number","type":"field","unit":{"type":"TRAFFIC","unit":"B/S"}},{"alias":"写入","key":"value5hQ0Ce2S","resultType":"number","type":"field","unit":{"type":"TRAFFIC","unit":"B/S"}}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"磁盘IO"},"w":12,"x":0,"y":40},{"h":10,"i":"view-5zpoQd6g","view":{"api":{"body":{"from":["docker_container_summary"],"groupby":["time()"],"select":[{"alias":"typefJayqUa1","expr":"time()"},{"alias":"valuex5rrfADW","expr":"round_float(diffps(rx_bytes::field), 2)"},{"alias":"valueezORvCqz","expr":"round_float(diffps(tx_bytes::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["docker_container_summary"],"typeDimensions":[{"alias":"时间","key":"typefJayqUa1","type":"time"}],"valueDimensions":[{"alias":"接收","key":"valuex5rrfADW","resultType":"number","type":"field","unit":{"type":"TRAFFIC","unit":"B/S"}},{"alias":"发送","key":"valueezORvCqz","resultType":"number","type":"field","unit":{"type":"TRAFFIC","unit":"B/S"}}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"容器网络"},"w":12,"x":12,"y":40}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("exception_analysis","exception_analysis","","micro_service","global","v2",'[{"h":10,"i":"view-1qwUXZqM","view":{"api":{"body":{"from":["error_alert"],"groupby":["time()"],"select":[{"alias":"typejp0SuUOW","expr":"time()"},{"alias":"value7sFuzU7F","expr":"round_float(sum(count::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_name":"{{serviceName}}","filter_type":"{{exceptionType}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:bar","config":{"dataSourceConfig":{"activedMetricGroups":["error_count"],"typeDimensions":[{"alias":"时间","key":"typejp0SuUOW","type":"time"}],"valueDimensions":[{"aggregation":"sum","alias":"次数","field":"error_count-count::field","key":"value7sFuzU7F","resultType":"number","type":"field"}]}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"异常趋势"},"w":24,"x":0,"y":0},{"h":10,"i":"view-7LXO3tsG","view":{"api":{"method":"get","query":{"end":"{{endTime}}","exceptionType":"{{exceptionType}}","limit":"{{limit}}","serviceId":"{{serviceId}}","serviceName":"{{serviceName}}","sort":"{{sort}}","start":"{{startTime}}","terminusKey":"{{terminusKey}}"},"url":"/api/apm/topology/exception/message"},"chartType":"table","config":{"dataSourceConfig":{"valueDimensions":[{"alias":"实例 ID","key":"instance_id","resultType":"number","type":"field"},{"alias":"异常类型","key":"exception_type","resultType":"string","type":"field"},{"alias":"Class","key":"class","resultType":"string","type":"field"},{"alias":"Method","key":"method","resultType":"string","type":"field"},{"alias":"异常消息","key":"message","resultType":"string","type":"field"},{"alias":"时间","key":"time","resultType":"string","type":"field"},{"alias":"次数","key":"count","resultType":"number","type":"field"}]},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D"}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"异常列表"},"w":24,"x":0,"y":10}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("organization_cluster_status","organization_cluster_status","","micro_service","global","v2",'[{"h":9,"i":"view-JOhL0CXv","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"now","format":"chartv2","q":"SELECT component_name::tag as component, map(max(health_status::field), 0,\'健康\',1,\'警告\',2,\'故障\',3,\'严重故障\') as status, message::tag as message  FROM leaf_component_status WHERE component_group::tag = \'dice_component\' AND cluster_name::tag = \'{{clusterName}}\'  GROUP BY component_name::tag ORDER BY max(health_status::field) DESC ","ql":"influxql","start":"before_15m","type":"_"},"url":"/api/orgCenter/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"activedMetricGroups":["other","other@leaf_component_status"],"isSqlMode":true,"resultFilters":[{"alias":"component_group","field":"leaf_component_status-component_group::tag","filter":{"operation":"=","value":"dice_component"},"key":"filterXEKejEbT","resultType":"string","type":"filter"}],"sortDimensions":[{"aggregation":"max","alias":"health_status","field":"leaf_component_status-health_status::field","key":"sortTzIkS6lj","resultType":"number","sort":"DESC","type":"sort"}],"sql":{"from":"leaf_component_status","fromSource":["other","other@leaf_component_status"],"groupBy":"component_name::tag","orderBy":"max(health_status::field) DESC","select":"component_name::tag as component, map(max(health_status::field), 0,\'健康\',1,\'警告\',2,\'故障\',3,\'严重故障\') as status, message::tag as message ","where":"component_group::tag = \'dice_component\' AND cluster_name::tag = \'{{clusterName}}\' "},"typeDimensions":[{"alias":"component_name","field":"leaf_component_status-component_name::tag","key":"typeCMRAY4es","resultType":"string","type":"field"}],"valueDimensions":[{"alias":"health_status","field":"leaf_component_status-health_status::field","key":"valuezllYIcc7","resultType":"number","type":"field"},{"alias":"message","field":"leaf_component_status-message::tag","key":"valueQ4n5l9uh","resultType":"string","type":"field"}]},"optionProps":{"isMoreThanOneDay":false,"moreThanOneDayFormat":"M/D"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"集群组件状态"},"w":24,"x":0,"y":0},{"h":9,"i":"view-G4LpQfk7","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"now","format":"chartv2","q":"SELECT component_name::tag as component, map(max(health_status::field), 0,\'健康\',1,\'警告\',2,\'故障\',3,\'严重故障\') as status, message::tag as message  FROM leaf_component_status WHERE component_group::tag = \'machine\'  AND cluster_name::tag = \'{{clusterName}}\'  GROUP BY component_name::tag ","ql":"influxql","start":"before_15m","type":"_"},"url":"/api/orgCenter/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"activedMetricGroups":["other","other@leaf_component_status"],"isSqlMode":true,"resultFilters":[{"alias":"component_group","field":"leaf_component_status-component_group::tag","filter":{"operation":"=","value":"machine"},"key":"filterQvEuKUkB","resultType":"string","type":"filter"}],"sortDimensions":[{"aggregation":"max","alias":"health_status","field":"leaf_component_status-health_status::field","key":"sort738b838Z","resultType":"number","sort":"DESC","type":"sort"}],"sql":{"from":"leaf_component_status","fromSource":["other","other@leaf_component_status"],"groupBy":"component_name::tag","select":"component_name::tag as component, map(max(health_status::field), 0,\'健康\',1,\'警告\',2,\'故障\',3,\'严重故障\') as status, message::tag as message ","where":"component_group::tag = \'machine\'  AND cluster_name::tag = \'{{clusterName}}\' "},"typeDimensions":[{"alias":"component_name","field":"leaf_component_status-component_name::tag","key":"type5AKxHUDZ","resultType":"string","type":"field"}],"valueDimensions":[{"aggregation":"max","alias":"health_status","field":"leaf_component_status-health_status::field","key":"valueAdJeTWFE","resultType":"number","type":"field"},{"alias":"message","field":"leaf_component_status-message::tag","key":"valuen746dfKr","resultType":"string","type":"field"}]},"optionProps":{"isMoreThanOneDay":false,"moreThanOneDayFormat":"M/D"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"集群节点状态"},"w":24,"x":0,"y":9},{"h":9,"i":"view-Ecrdq0jI","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"now","format":"chartv2","q":"SELECT component_name::tag as component, map(health_status::field, 0,\'健康\',1,\'警告\',2,\'故障\',3,\'严重故障\') AS status, message::tag as message  FROM leaf_component_status WHERE component_group::tag = \'kubernetes\'  AND cluster_name::tag = \'{{clusterName}}\'  GROUP BY component_name::tag ORDER BY max(health_status::field) DESC ","ql":"influxql","start":"before_15m","type":"_"},"url":"/api/orgCenter/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"isSqlMode":true,"sql":{"from":"leaf_component_status","fromSource":["other","other@leaf_component_status"],"groupBy":"component_name::tag","orderBy":"max(health_status::field) DESC","select":"component_name::tag as component, map(health_status::field, 0,\'健康\',1,\'警告\',2,\'故障\',3,\'严重故障\') AS status, message::tag as message ","where":"component_group::tag = \'kubernetes\'  AND cluster_name::tag = \'{{clusterName}}\' "}},"optionProps":{"isMoreThanOneDay":false,"moreThanOneDayFormat":"M/D"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"kubernetes状态"},"w":24,"x":0,"y":18},{"h":9,"i":"view-tgogQI1P","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"now","format":"chartv2","q":"SELECT component_name::tag as component, map(health_status::field, 0,\'健康\',1,\'警告\',2,\'故障\',3,\'严重故障\') AS status, message::tag as message  FROM leaf_component_status WHERE component_group::tag = \'dice_addon\' AND cluster_name::tag = \'{{clusterName}}\'  GROUP BY component_name::tag ORDER BY max(health_status::field) DESC ","ql":"influxql","start":"before_15m","type":"_"},"url":"/api/orgCenter/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"isSqlMode":true,"sql":{"from":"leaf_component_status","fromSource":["other","other@leaf_component_status"],"groupBy":"component_name::tag","orderBy":"max(health_status::field) DESC","select":"component_name::tag as component, map(health_status::field, 0,\'健康\',1,\'警告\',2,\'故障\',3,\'严重故障\') AS status, message::tag as message ","where":"component_group::tag = \'dice_addon\' AND cluster_name::tag = \'{{clusterName}}\' "}},"optionProps":{"isMoreThanOneDay":false,"moreThanOneDayFormat":"M/D"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"集群中间件状态"},"w":24,"x":0,"y":27}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("process_analysis_nodejs","process_analysis_nodejs","","micro_service","global","v2",'[{"h":10,"i":"view-hfpm2BQF","view":{"api":{"body":{"from":["nodejs_memory"],"groupby":["time()"],"select":[{"alias":"typemiYT3xEp","expr":"time()"},{"alias":"value4luY4MgI","expr":"round_float(avg(heap_used::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["nodejs_memory"],"typeDimensions":[{"alias":"时间","key":"typemiYT3xEp","type":"time"}],"valueDimensions":[{"alias":"Usage","key":"value4luY4MgI","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isMoreThanOneDay":false,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"Heap Memory Usage"},"w":12,"x":0,"y":0},{"h":10,"i":"view-2afmeXcs","view":{"api":{"body":{"from":["nodejs_memory"],"groupby":["time()"],"select":[{"alias":"typeCTERAG2L","expr":"time()"},{"alias":"value2zRwbFet","expr":"round_float(avg(external::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["nodejs_memory"],"typeDimensions":[{"alias":"时间","key":"typeCTERAG2L","type":"time"}],"valueDimensions":[{"alias":"MB","key":"value2zRwbFet","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isMoreThanOneDay":false,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"Non Heap Memory Usage"},"w":12,"x":12,"y":0},{"h":9,"i":"view-0JahfhFo","view":{"api":{"body":{"from":["nodejs_cluster"],"groupby":["time()"],"select":[{"alias":"typeTDo594ut","expr":"time()"},{"alias":"valueogVBbdfi","expr":"round_float(sum(count::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["nodejs_cluster"],"typeDimensions":[{"alias":"时间","key":"typeTDo594ut","type":"time"}],"valueDimensions":[{"alias":"次数","key":"valueogVBbdfi","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"Cluster Count"},"w":12,"x":0,"y":10},{"h":9,"i":"view-kKuIcxbz","view":{"api":{"body":{"from":["nodejs_async_resource"],"groupby":["time()"],"select":[{"alias":"typezZSh0it6","expr":"time()"},{"alias":"valueK4VKq3YC","expr":"round_float(sum(count::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_service_id":"{{serviceId}}","filter_service_instance_id":"{{instanceId}}","filter_service_name":"{{serviceName}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["nodejs_async_resource"],"typeDimensions":[{"alias":"时间","key":"typezZSh0it6","type":"time"}],"valueDimensions":[{"alias":"次数","key":"valueK4VKq3YC","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"Async Resources"},"w":12,"x":12,"y":10}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("service_analysis","service_analysis","","micro_service","global","v2",'[{"h":12,"i":"view-yJsgVtEN","view":{"api":{"method":"get","query":{"end":"{{endTime}}","serviceId":"{{serviceId}}","serviceName":"{{serviceName}}","start":"{{startTime}}","terminusKey":"{{terminusKey}}"},"url":"/api/apm/topology/service/instances"},"chartType":"table","config":{"dataSourceConfig":{"activedMetricGroups":["application_service_node"],"limit":50,"valueDimensions":[{"alias":"实例 ID","key":"serviceInstanceId","resultType":"string","type":"field"},{"alias":"运行时版本","key":"platformVersion","resultType":"string","type":"field"},{"alias":"启动时间","key":"startTime","resultType":"number","type":"field"},{"alias":"最后心跳时间","key":"lastHeartbeatTime","resultType":"number","type":"field"},{"alias":"状态","key":"instanceState","resultType":"string","type":"field"}]},"optionProps":{"isMoreThanOneDay":false,"moreThanOneDayFormat":"YYYY/MM/DD","noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"服务实例"},"w":24,"x":0,"y":0},{"h":10,"i":"view-WlIYS74f","view":{"api":{"body":{"from":["application_http"],"groupby":["time()"],"select":[{"alias":"typeTRtdbCxL","expr":"time()"},{"alias":"valueEOWkNhFW","expr":"round_float(sum(elapsed_count::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_application_id":"{{applicationId}}","filter_target_service_name":"{{serviceName}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_http"],"typeDimensions":[{"alias":"时间","key":"typeTRtdbCxL","type":"time"}],"valueDimensions":[{"aggregation":"sum","alias":"请求量","field":"application_http-elapsed_count::field","key":"valueEOWkNhFW","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isMoreThanOneDay":false,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"接口请求量"},"w":12,"x":0,"y":24},{"h":10,"i":"view-NDNpI1k5","view":{"api":{"body":{"from":["application_http"],"groupby":["time()"],"select":[{"alias":"typeCHGOKy9u","expr":"time()"},{"alias":"valueA3dJ0k10","expr":"sum(elapsed_sum::field)/sum(elapsed_count::field)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_application_id":"{{applicationId}}","filter_target_service_name":"{{serviceName}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_http"],"typeDimensions":[{"alias":"时间","key":"typeCHGOKy9u","type":"time"}],"valueDimensions":[{"alias":"平均延迟(ms)","expr":"sum(elapsed_sum::field)/sum(elapsed_count::field)","key":"valueA3dJ0k10","type":"expr","unit":{"type":"TIME","unit":"ns"}}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"isMoreThanOneDay":false,"noAreaColor":true,"nullDisplay":0}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"请求延迟"},"w":12,"x":12,"y":24},{"h":9,"i":"view-gHh8GdKx","view":{"api":{"body":{"from":["application_http"],"groupby":["time()","http_status_code::tag"],"select":[{"alias":"type269Zbamy","expr":"time()"},{"alias":"typeBng48cgD","expr":"http_status_code::tag"},{"alias":"valueGRdav3nr","expr":"round_float(sum(elapsed_count::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_application_id":"{{applicationId}}","filter_target_service_name":"{{serviceName}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_http"],"typeDimensions":[{"alias":"时间","key":"type269Zbamy","type":"time"},{"alias":"HTTP状态码","field":"application_http-http_status_code::tag","key":"typeBng48cgD","resultType":"string","type":"field"}],"valueDimensions":[{"aggregation":"sum","alias":"请求量","field":"application_http-elapsed_count::field","key":"valueGRdav3nr","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isMoreThanOneDay":false,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"HTTP 状态"},"w":12,"x":0,"y":34},{"h":9,"i":"view-FOwzRMTP","view":{"api":{"body":{"from":["error_count"],"groupby":["time()"],"select":[{"alias":"typeJKRnc75E","expr":"time()"},{"alias":"valueXTEB69H8","expr":"round_float(sum(count::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter_application_id":"{{applicationId}}","filter_service_name":"{{serviceName}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["error_count"],"typeDimensions":[{"alias":"时间","key":"typeJKRnc75E","type":"time"}],"valueDimensions":[{"alias":"次数","key":"valueXTEB69H8","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isMoreThanOneDay":false,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"服务异常"},"w":12,"x":12,"y":34},{"h":12,"i":"view-NsSwxxe0","view":{"api":{"body":{"from":["analyzer_alert"],"groupby":["time()"],"select":[{"alias":"type441teal6","expr":"time()"},{"alias":"valueynJmzYoH","expr":"round_float(count(terminus_key::tag), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter_application_id":"{{applicationId}}","filter_service_name":"{{serviceName}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:bar","config":{"dataSourceConfig":{"activedMetricGroups":["analyzer_alert"],"typeDimensions":[{"alias":"时间","key":"type441teal6","type":"time"}],"valueDimensions":[{"alias":"次数","key":"valueynJmzYoH","resultType":"number","type":"field"}]}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"服务告警事件"},"w":24,"x":0,"y":12}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("services","services","","micro_service","global","v2",'[{"h":9,"i":"view-4EaRR6U6","view":{"api":{"method":"get","query":{"end":"{{endTime}}","serviceName":"{{serviceName}}","start":"{{startTime}}","terminusKey":"{{terminusKey}}"},"url":"/api/apm/topology/services"},"chartType":"table","config":{"dataSourceConfig":{"valueDimensions":[{"aggregation":"sum","alias":"服务名称","key":"service_name","resultType":"string","type":"field"},{"aggregation":"sum","alias":"请求次数","key":"req_count","resultType":"number","type":"field"},{"alias":"请求错误数","key":"req_error_count","resultType":"number","type":"field"},{"aggregation":"avg","alias":"平均延迟(ms)","key":"avg_req_time","resultType":"number","type":"field"},{"alias":"运行实例数","key":"running_stopped_instance_count","resultType":"string","type":"field"}]},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D","rowClick":{"name":"jumpToDetail","value":"service_name"}}},"dataSourceType":"api","description":"","staticData":null,"title":"服务列表"},"w":24,"x":0,"y":0}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("translation_analysis_cache","translation_analysis_cache","","micro_service","global","v2",'[{"h":9,"i":"view-1XA1pzWR","view":{"api":{"body":{"from":["application_cache"],"groupby":["time()"],"select":[{"alias":"typegq99wZs2","expr":"time()"},{"alias":"valueSR6vrde7","expr":"round_float(count(elapsed_count::field), 2)"}],"where":["db_statement::tag=~/.*{{subSearch}}.*/"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_source_service_id":"{{serviceId}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","search":"{{search}}","serviceName":"{{serviceName}}","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:bar","config":{"dataSourceConfig":{"activedMetricGroups":["application_cache","application_cahce_request"],"typeDimensions":[{"alias":"时间","key":"typegq99wZs2","timeFormat":"YYYY/MM/DD","timeInterval":{"unit":"m","value":1},"type":"time"}],"valueDimensions":[{"aggregation":"count","alias":"请求次数","field":"application_cache-elapsed_count::field","key":"valueSR6vrde7","resultType":"number","type":"field"}]},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"YYYY/MM/DD"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"服务请求"},"w":11,"x":0,"y":0},{"h":9,"i":"view-J4SwjHDP","view":{"api":{"body":{"from":["application_cache"],"groupby":["time()"],"select":[{"alias":"typeQuPvs7M2","expr":"time()"},{"alias":"valueCxbcWuWT","expr":"round_float(avg(elapsed_mean::field), 2)"}],"where":["db_statement::tag=~/.*{{subSearch}}.*/"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_source_service_id":"{{serviceId}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","serviceName":"{{serviceName}}","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_cache","application_cache_request"],"typeDimensions":[{"alias":"时间","key":"typeQuPvs7M2","timeFormat":"YYYY/MM/DD","timeInterval":{"unit":"m","value":1},"type":"time"}],"valueDimensions":[{"aggregation":"avg","alias":"平均响应时间","field":"application_cache-elapsed_mean::field","key":"valueCxbcWuWT","resultType":"number","type":"field","unit":{"type":"TIME","unit":"ns"}}]},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"YYYY/MM/DD","noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"请求延迟"},"w":13,"x":11,"y":0},{"h":10,"i":"view-lVTYdASX","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"{{endTime}}","filterServiceName":"{{serviceName}}","layer":"cache","search":"{{search}}","serviceId":"{{serviceId}}","sort":"{{sort}}","start":"{{startTime}}","terminusKey":"{{terminusKey}}"},"url":"/api/apm/topology/translation/db"},"chartType":"table","config":{"dataSourceConfig":{"valueDimensions":[{"alias":"执行语句","key":"operation","resultType":"string","type":"field"},{"alias":"缓存类型","key":"db_type","resultType":"string","type":"field"},{"alias":"缓存实例","key":"db_instance","resultType":"string","type":"field"},{"alias":"缓存地址","key":"db_host","resultType":"string","type":"field"},{"alias":"调用次数","key":"call_count","resultType":"number","type":"field"},{"alias":"慢调用次数","key":"slow_elapsed_count","resultType":"number","type":"field"},{"alias":"平均延迟","key":"avg_elapsed","resultType":"string","type":"field"}]},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D","rowClick":{"name":"searchTranslation","value":"operation"}}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"缓存调用"},"w":24,"x":0,"y":9}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("translation_analysis_database","translation_analysis_database","","micro_service","global","v2",'[{"h":9,"i":"view-1XA1pzWR","view":{"api":{"body":{"from":["application_db"],"groupby":["time()"],"select":[{"alias":"typegq99wZs2","expr":"time()"},{"alias":"valueSR6vrde7","expr":"round_float(count(elapsed_count::field), 2)"}],"where":["db_statement::tag=~/.*{{subSearch}}.*/"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_source_service_id":"{{serviceId}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","serviceName":"{{serviceName}}","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:bar","config":{"dataSourceConfig":{"activedMetricGroups":["application_db","application_db_request"],"typeDimensions":[{"alias":"时间","key":"typegq99wZs2","timeFormat":"YYYY/MM/DD","timeInterval":{"unit":"m","value":1},"type":"time"}],"valueDimensions":[{"aggregation":"count","alias":"请求次数","field":"application_db-elapsed_count::field","key":"valueSR6vrde7","resultType":"number","type":"field"}]},"optionProps":{"isMoreThanOneDay":false,"moreThanOneDayFormat":"YYYY/MM/DD"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"服务请求"},"w":11,"x":0,"y":0},{"h":9,"i":"view-J4SwjHDP","view":{"api":{"body":{"from":["application_db"],"groupby":["time()"],"select":[{"alias":"typeQuPvs7M2","expr":"time()"},{"alias":"valueCxbcWuWT","expr":"round_float(avg(elapsed_mean::field), 2)"}],"where":["db_statement::tag=~/.*{{subSearch}}.*/"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_source_service_id":"{{serviceId}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","serviceName":"{{serviceName}}","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_db","application_db_request"],"typeDimensions":[{"alias":"时间","key":"typeQuPvs7M2","timeFormat":"YYYY/MM/DD","timeInterval":{"unit":"m","value":1},"type":"time"}],"valueDimensions":[{"aggregation":"avg","alias":"平均响应时间","field":"application_db-elapsed_mean::field","key":"valueCxbcWuWT","resultType":"number","type":"field","unit":{"type":"TIME","unit":"ns"}}]},"optionProps":{"isMoreThanOneDay":false,"moreThanOneDayFormat":"YYYY/MM/DD","noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"请求延迟"},"w":13,"x":11,"y":0},{"h":10,"i":"view-lVTYdASX","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"{{endTime}}","filterServiceName":"{{serviceName}}","layer":"db","search":"{{search}}","serviceId":"{{serviceId}}","sort":"{{sort}}","start":"{{startTime}}","terminusKey":"{{terminusKey}}"},"url":"/api/apm/topology/translation/db"},"chartType":"table","config":{"dataSourceConfig":{"valueDimensions":[{"alias":"SQL","key":"operation","resultType":"string","type":"field"},{"alias":"数据库类型","key":"db_type","resultType":"string","type":"field"},{"alias":"数据库实例","key":"db_instance","resultType":"string","type":"field"},{"alias":"数据库地址","key":"db_host","resultType":"string","type":"field"},{"alias":"调用次数","key":"call_count","resultType":"number","type":"field"},{"alias":"慢调用次数","key":"slow_elapsed_count","resultType":"number","type":"field"},{"alias":"平均延迟","key":"avg_elapsed","resultType":"string","type":"field"}]},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D","rowClick":{"name":"searchTranslation","value":"operation"}}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"数据库调用"},"w":24,"x":0,"y":9}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("translation_analysis_http","translation_analysis_http","","micro_service","global","v2",'[{"h":11,"i":"view-UQW30sdQ","view":{"api":{"body":{"from":["application_http"],"groupby":["time()"],"select":[{"alias":"typeHWstw9Kl","expr":"time()"},{"alias":"valuensYW3soM","expr":"round_float(count(elapsed_count::field), 2)"}],"where":["http_path::tag=~/.*{{subSearch}}.*/"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_service_id":"{{serviceId}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","serviceName":"{{serviceName}}","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:bar","config":{"dataSourceConfig":{"activedMetricGroups":["application_http","application_http_request"],"typeDimensions":[{"alias":"时间","key":"typeHWstw9Kl","timeField":{},"timeFormat":"YYYY/MM/DD","timeInterval":{"unit":"m","value":1},"type":"time"}],"valueDimensions":[{"aggregation":"count","alias":"请求次数","field":"application_http-elapsed_count::field","key":"valuensYW3soM","resultType":"number","type":"field"}]},"optionProps":{"isConnectNulls":false,"isLabel":false,"isMoreThanOneDay":true,"moreThanOneDayFormat":"YYYY/MM/DD"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"服务请求"},"w":12,"x":0,"y":10},{"h":11,"i":"view-WPTjI5ir","view":{"api":{"body":{"from":["application_http"],"groupby":["time()"],"select":[{"alias":"type2jCjYVIp","expr":"time()"},{"alias":"valueZjrFmhZg","expr":"round_float(avg(elapsed_mean::field), 2)"}],"where":["http_path::tag=~/.*{{subSearch}}.*/"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_service_id":"{{serviceId}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","serviceName":"{{serviceName}}","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_http","application_http_request"],"typeDimensions":[{"alias":"时间","key":"type2jCjYVIp","timeFormat":"YYYY/MM/DD","timeInterval":{"unit":"m","value":1},"type":"time"}],"valueDimensions":[{"aggregation":"avg","alias":"平均响应时间","field":"application_http-elapsed_mean::field","key":"valueZjrFmhZg","resultType":"number","type":"field","unit":{"type":"TIME","unit":"ns"}}]},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"YYYY/MM/DD","noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"请求延迟"},"w":12,"x":12,"y":10},{"h":10,"i":"view-lVTYdASX","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"{{endTime}}","filterServiceName":"{{serviceName}}","layer":"http","search":"{{search}}","serviceId":"{{serviceId}}","sort":"{{sort}}","start":"{{startTime}}","terminusKey":"{{terminusKey}}"},"url":"/api/apm/topology/translation"},"chartType":"table","config":{"dataSourceConfig":{"valueDimensions":[{"alias":"事务名称","key":"translation_name","resultType":"string","type":"field"},{"alias":"调用次数","key":"elapsed_count","resultType":"number","type":"field"},{"alias":"错误次数","key":"error_count","resultType":"number","type":"field"},{"alias":"慢调用次数","key":"slow_elapsed_count","resultType":"number","type":"field"},{"alias":"平均延迟","key":"avg_elapsed","resultType":"string","type":"field"}]},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D","rowClick":{"name":"searchTranslation","value":"translation_name"}}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"HTTP事务"},"w":24,"x":0,"y":0},{"h":9,"i":"view-FlQBcOqT","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"{{endTime}}","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_service_id":"{{serviceId}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","q":"SELECT http_path::tag as URL,format_time(timestamp,\'2006-01-02 15:04:05\') as 时间,format_duration(max(elapsed_max::field),\'\',2) as 最大耗时,format_duration(min(elapsed_min::field),\'\',2) as 最小耗时 FROM application_http WHERE http_path::tag=~/.*{{subSearch}}.*/ AND target_service_name::tag=~/.*{{serviceName}}.*/ GROUP BY http_path::tag ORDER BY avg(elapsed_mean::field) DESC LIMIT 50 ","ql":"influxql","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"isSqlMode":true,"sql":{"from":"application_http_slow","fromSource":["application_http","application_http_slow"],"groupBy":"http_path::tag","limit":50,"orderBy":"","select":"http_path::tag as URL,format_time(timestamp,\'2006-01-02 15:04:05\') as 时间,format_duration(elapsed_max::field,\'\',2) as 最大耗时,format_duration(elapsed_min::field,\'\',2) as 最小耗时","where":["http_path::tag=~/.*{{subSearch}}.*/"]}},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D","rowClick":{"name":"traceSlowTranslation","value":"URL"}}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"慢事务追踪top50"},"w":14,"x":0,"y":21},{"h":9,"i":"view-sCRTdIQb","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"{{endTime}}","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_service_id":"{{serviceId}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","q":"SELECT http_path::tag as URL,format_time(timestamp,\'2006-01-02 15:04:05\') as 时间 FROM application_http_error WHERE http_path::tag=~/.*{{subSearch}}.*/ AND target_service_name::tag=~/.*{{serviceName}}.*/ GROUP BY http_path::tag ORDER BY max(timestamp) DESC LIMIT 50 ","ql":"influxql","serviceName":"{{serviceName}}","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"isSqlMode":true,"sql":{"from":"application_http_error","fromSource":["application_http","application_http_error"],"groupBy":"http_path::tag","limit":50,"select":"http_path::tag as URL,format_time(timestamp,\'2006-01-02 15:04:05\') as 时间","where":["http_path::tag=~/.*{{subSearch}}.*/"]}},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D","rowClick":{"name":"traceSlowTranslation","value":"URL"}}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"错误事务追踪Top50"},"w":10,"x":14,"y":21}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("translation_analysis_rpc","translation_analysis_rpc","","micro_service","global","v2",'[{"h":11,"i":"view-UQW30sdQ","view":{"api":{"body":{"from":["application_rpc"],"groupby":["time()"],"select":[{"alias":"typeHWstw9Kl","expr":"time()"},{"alias":"valueV71fTatk","expr":"round_float(count(elapsed_count::field), 2)"}],"where":["dubbo_method::tag=~/.*{{subSearch}}.*/"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_service_id":"{{serviceId}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","serviceName":"{{serviceName}}","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:bar","config":{"dataSourceConfig":{"activedMetricGroups":["application_rpc","application_rpc_request"],"typeDimensions":[{"alias":"时间","key":"typeHWstw9Kl","timeField":{},"timeFormat":"YYYY/MM/DD","timeInterval":{"unit":"m","value":1},"type":"time"}],"valueDimensions":[{"aggregation":"count","alias":"请求次数","field":"application_rpc-elapsed_count::field","key":"valueV71fTatk","resultType":"number","type":"field"}]},"optionProps":{"isConnectNulls":false,"isLabel":false,"isMoreThanOneDay":true,"moreThanOneDayFormat":"YYYY/MM/DD"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"服务请求"},"w":12,"x":0,"y":10},{"h":11,"i":"view-WPTjI5ir","view":{"api":{"body":{"from":["application_rpc"],"groupby":["time()"],"select":[{"alias":"type2jCjYVIp","expr":"time()"},{"alias":"valueaecENLIN","expr":"round_float(avg(elapsed_mean::field), 2)"}],"where":["dubbo_method::tag=~/.*{{subSearch}}.*/"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_service_id":"{{serviceId}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","serviceName":"{{serviceName}}","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_rpc","application_rpc_request"],"typeDimensions":[{"alias":"时间","key":"type2jCjYVIp","timeFormat":"YYYY/MM/DD","timeInterval":{"unit":"m","value":1},"type":"time"}],"valueDimensions":[{"aggregation":"avg","alias":"请求耗时平均值","field":"application_rpc-elapsed_mean::field","key":"valueaecENLIN","resultType":"number","type":"field","unit":{"type":"TIME","unit":"ns"}}]},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"YYYY/MM/DD","noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"请求延迟"},"w":12,"x":12,"y":10},{"h":10,"i":"view-lVTYdASX","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"{{endTime}}","filterServiceName":"{{serviceName}}","layer":"rpc","search":"{{search}}","serviceId":"{{serviceId}}","sort":"{{sort}}","start":"{{startTime}}","terminusKey":"{{terminusKey}}"},"url":"/api/apm/topology/translation"},"chartType":"table","config":{"dataSourceConfig":{"valueDimensions":[{"alias":"事务名称","key":"translation_name","resultType":"string","type":"field"},{"alias":"调用次数","key":"elapsed_count","resultType":"number","type":"field"},{"alias":"错误次数","key":"error_count","resultType":"number","type":"field"},{"alias":"慢调用次数","key":"slow_elapsed_count","resultType":"number","type":"field"},{"alias":"平均延迟","key":"avg_elapsed","resultType":"string","type":"field"}]},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D","rowClick":{"name":"searchTranslation","value":"translation_name"}}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"RPC事务"},"w":24,"x":0,"y":0},{"h":9,"i":"view-FlQBcOqT","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"{{endTime}}","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_service_id":"{{serviceId}}","filter_terminus_key":"{{terminusKey}}","format":"chartv2","q":"SELECT dubbo_service::tag as Service,dubbo_method::tag as Method,format_time(timestamp,\'2006-01-02 15:04:05\') as 时间,format_duration(elapsed_max::field,\'\',2) as 最大耗时,format_duration(elapsed_min::field,\'\',2) as 最小耗时 FROM application_rpc_slow WHERE dubbo_method::tag=~/.*{{subSearch}}.*/ AND target_service_name::tag=~/.*{{serviceName}}.*/ GROUP BY dubbo_method::tag ORDER BY avg(elapsed_mean::field) DESC LIMIT 50 ","ql":"influxql","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"isSqlMode":true,"sql":{"from":"application_rpc_slow","fromSource":["application_rpc","application_rpc_slow"],"groupBy":"dubbo_method::tag","limit":50,"orderBy":"","select":"dubbo_method::tag as Method,format_time(timestamp,\'2006-01-02 15:04:05\') as 时间,format_duration(elapsed_max::field,\'\',2) as 最大耗时,format_duration(elapsed_min::field,\'\',2) as 最小耗时","where":["dubbo_method::tag=~/.*{{subSearch}}.*/"]}},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D","rowClick":{"name":"traceSlowTranslation","value":"Method"}}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"慢事务追踪top50"},"w":14,"x":0,"y":21},{"h":9,"i":"view-sCRTdIQb","view":{"api":{"body":null,"extraData":null,"header":null,"method":"get","query":{"end":"{{endTime}}","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_service_id":"{{serviceId}}","format":"chartv2","q":"SELECT dubbo_service::tag as Service,dubbo_method::tag as Method,format_time(timestamp,\'2006-01-02 15:04:05\') as 时间 FROM application_rpc_error WHERE dubbo_method::tag=~/.*{{subSearch}}.*/ AND target_service_name::tag=~/.*{{serviceName}}.*/ GROUP BY dubbo_method::tag ORDER BY max(timestamp) DESC  LIMIT 50 ","ql":"influxql","serviceName":"{{serviceName}}","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"isSqlMode":true,"sql":{"from":"application_rpc_error","fromSource":["application_rpc","application_rpc_error"],"groupBy":"dubbo_method::tag","limit":50,"select":"dubbo_method::tag as Method,format_time(timestamp,\'2006-01-02 15:04:05\') as 时间","where":"dubbo_method::tag=~/.*{{subSearch}}.*/"}},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D","rowClick":{"name":"traceSlowTranslation","value":"Method"}}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"错误事务追踪Top50"},"w":10,"x":14,"y":21}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("global_overview","global_overview","","micro_service","global","v2",'[{"h":4,"i":"view-global-micro_service_overview","view":{"api":{"method":"get","query":{"end":"{{endTime}}","scope":"micro_service","start":"{{startTime}}","terminusKey":"{{terminusKey}}"},"url":"/api/apm/topology/overview"},"chartType":"card","config":{"dataSourceConfig":{"valueDimensions":[{"alias":"服务","key":"service_count","resultType":"number","type":"field"},{"alias":"运行实例","key":"service_running_instance_count","resultType":"number","type":"field"},{"alias":"错误请求","key":"service_error_req_count","resultType":"number","type":"field"},{"alias":"服务异常","key":"service_exception_count","resultType":"number","type":"field"},{"alias":"告警次数","key":"alert_count","resultType":"number","type":"field"}]},"optionProps":{"isMoreThanOneDay":false}},"dataSourceType":"api","description":"","staticData":{},"title":"全局概览"},"w":24,"x":0,"y":0}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("global_request","global_request","","micro_service","global","v2",'[{"h":7,"i":"view-rsjAvNf9","view":{"api":{"body":{"from":["application_http_service","application_db_service","application_rpc_service","application_mq_service","application_cache_service"],"groupby":["target_service_name::tag"],"limit":3,"orderby":[{"dir":"DESC","expr":"sum(count_sum::field)"}],"select":[{"alias":"typeLkQi9B9p","expr":"target_service_name::tag"},{"alias":"valueCLP0s7v0","expr":"round_float(sum(count_sum::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"activedMetricGroups":["application_http_service"],"limit":3,"typeDimensions":[{"alias":"服务","key":"typeLkQi9B9p","resultType":"string","type":"field"}],"valueDimensions":[{"aggregation":"sum","alias":"次数","key":"valueCLP0s7v0","resultType":"number","type":"field"}]},"optionProps":{"isMoreThanOneDay":false,"moreThanOneDayFormat":"M/D"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"请求事务 TOP 3"},"w":24,"x":0,"y":0},{"h":7,"i":"view-ou4ssGmm","view":{"api":{"body":{"from":["application_http_error","application_db_error","application_rpc_error","application_mq_error","application_cache_error"],"groupby":["target_service_name::tag"],"limit":3,"orderby":[{"dir":"DESC","expr":"sum(elapsed_count::field)"}],"select":[{"alias":"typeA8qIXdnz","expr":"target_service_name::tag"},{"alias":"valueb3jOhFB8","expr":"round_float(sum(elapsed_count::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"activedMetricGroups":["application_http_error"],"limit":3,"sortDimensions":[{"aggregation":"sum","alias":"请求次数","key":"sortJR0cQzZ8","resultType":"number","sort":"DESC","type":"sort"}],"typeDimensions":[{"alias":"服务","key":"typeA8qIXdnz","resultType":"string","type":"field"}],"valueDimensions":[{"alias":"次数","key":"valueb3jOhFB8","resultType":"number","type":"field"}]},"optionProps":{"isMoreThanOneDay":false,"moreThanOneDayFormat":"M/D"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"错误请求 TOP 3"},"w":24,"x":0,"y":8},{"h":7,"i":"view-yYMtijHa","view":{"api":{"body":{"from":["error_count"],"groupby":["service_name::tag"],"limit":3,"orderby":[{"dir":"DESC","expr":"sum(count::field)"}],"select":[{"alias":"typegNGz17tG","expr":"service_name::tag"},{"alias":"value33vjO49J","expr":"round_float(sum(count::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"activedMetricGroups":["error_count"],"limit":3,"sortDimensions":[{"aggregation":"sum","alias":"请求次数","field":"error_count-count::field","key":"sortwjwBN97R","resultType":"number","sort":"DESC","type":"sort"}],"typeDimensions":[{"alias":"服务","field":"error_count-service_name::tag","key":"typegNGz17tG","resultType":"string","type":"field"}],"valueDimensions":[{"aggregation":"sum","alias":"次数","field":"error_count-count::field","key":"value33vjO49J","resultType":"number","type":"field"}]},"optionProps":{"isMoreThanOneDay":false,"moreThanOneDayFormat":"M/D"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"服务异常 TOP 3"},"w":24,"x":0,"y":17}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("topology_node_cache","topology_node_cache","","micro_service","global","v2",'[{"h":10,"i":"view-kV69Moc4","view":{"api":{"body":{"from":["application_cache_service"],"groupby":["time()"],"select":[{"alias":"typeFxiuOiOf","expr":"time()"},{"alias":"valueYaLkGKG1","expr":"round_float(sum(count_sum::field), 2)"}],"where":["host::tag=\'{{host}}\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_cache_service"],"resultFilters":[{"alias":"主机","field":"application_cache_service-host::tag","filter":{"operation":"=","value":"{{host}}"},"key":"filter7m5S3zhY","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"typeFxiuOiOf","type":"time"}],"valueDimensions":[{"aggregation":"sum","alias":"请求次数","field":"application_cache_service-count_sum::field","key":"valueYaLkGKG1","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"isMoreThanOneDay":false,"noAreaColor":true,"nullDisplay":"--"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"吞吐量"},"w":24,"x":0,"y":0},{"h":10,"i":"view-raHXzLcO","view":{"api":{"body":{"from":["application_cache_service"],"groupby":["time()"],"select":[{"alias":"type6jWJnYDU","expr":"time()"},{"alias":"value4fg9lHMB","expr":"sum(elapsed_sum::field)/sum(count_sum::field)"}],"where":["host::tag=\'{{host}}\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_cache_service"],"resultFilters":[{"alias":"主机","field":"application_cache_service-host::tag","filter":{"operation":"=","value":"{{host}}"},"key":"filterZCeYWbcE","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"type6jWJnYDU","type":"time"}],"valueDimensions":[{"alias":"平均延迟(ms)","expr":"sum(elapsed_sum::field)/sum(count_sum::field)","key":"value4fg9lHMB","type":"expr","unit":{"type":"TIME","unit":"ns"}}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"isMoreThanOneDay":false,"noAreaColor":true,"nullDisplay":"--"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"响应时间"},"w":24,"x":0,"y":10}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("topology_node_db","topology_node_db","","micro_service","global","v2",'[{"h":10,"i":"view-kV69Moc4","view":{"api":{"body":{"from":["application_db_service"],"groupby":["time()"],"select":[{"alias":"typeFxiuOiOf","expr":"time()"},{"alias":"valueYaLkGKG1","expr":"round_float(sum(count_sum::field), 2)"}],"where":["host::tag=\'{{host}}\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_db_service"],"resultFilters":[{"alias":"主机","field":"application_db_service-host::tag","filter":{"operation":"=","value":"{{host}}"},"key":"filter7m5S3zhY","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"typeFxiuOiOf","type":"time"}],"valueDimensions":[{"aggregation":"sum","alias":"请求次数","field":"application_db_service-count_sum::field","key":"valueYaLkGKG1","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"isMoreThanOneDay":false,"noAreaColor":true,"nullDisplay":"--"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"吞吐量"},"w":24,"x":0,"y":0},{"h":10,"i":"view-raHXzLcO","view":{"api":{"body":{"from":["application_db_service"],"groupby":["time()"],"select":[{"alias":"type6jWJnYDU","expr":"time()"},{"alias":"value4fg9lHMB","expr":"sum(elapsed_sum::field)/sum(count_sum::field)"}],"where":["host::tag=\'{{host}}\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_db_service"],"resultFilters":[{"alias":"主机","field":"application_db_service-host::tag","filter":{"operation":"=","value":"{{host}}"},"key":"filterZCeYWbcE","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"type6jWJnYDU","type":"time"}],"valueDimensions":[{"alias":"平均延迟(ms)","expr":"sum(elapsed_sum::field)/sum(count_sum::field)","key":"value4fg9lHMB","type":"expr","unit":{"type":"TIME","unit":"ns"}}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"isMoreThanOneDay":false,"noAreaColor":true,"nullDisplay":"--"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"响应时间"},"w":24,"x":0,"y":10}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("topology_node_gateway","topology_node_gateway","","micro_service","global","v2",'[{"h":7,"i":"view-VrLq6JXO","view":{"api":{"body":{"from":["application_http_service"],"groupby":["host::tag"],"limit":3,"orderby":[{"dir":"DESC","expr":"sum(count_sum::field)"}],"select":[{"alias":"typeTybZBDTL","expr":"host::tag"},{"alias":"valuebD64VaGD","expr":"round_float(sum(count_sum::field), 2)"}],"where":["target_addon_type::tag=\'ApiGateway\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"table","config":{"dataSourceConfig":{"activedMetricGroups":["application_http"],"limit":3,"resultFilters":[{"alias":"Target Addon Type","field":"application_http-target_addon_type::tag","filter":{"operation":"=","value":"ApiGateway"},"key":"filterx3BvagjC","resultType":"string","type":"filter"}],"sortDimensions":[{"aggregation":"sum","alias":"请求次数","field":"application_http-elapsed_count::field","key":"sort9zKC6Rue","resultType":"number","sort":"DESC","type":"sort"}],"typeDimensions":[{"alias":"域名","field":"application_http-req_host::tag","key":"typeTybZBDTL","resultType":"string","type":"field"}],"valueDimensions":[{"aggregation":"sum","alias":"请求次数","field":"application_http-elapsed_count::field","key":"valuebD64VaGD","resultType":"number","type":"field"}]},"optionProps":{"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"域名请求 TOP 3"},"w":24,"x":0,"y":0},{"h":9,"i":"view-jipKAIYk","view":{"api":{"body":{"from":["application_http_service"],"groupby":["time()"],"select":[{"alias":"typeQXtBniA6","expr":"time()"},{"alias":"valueA2KagOZF","expr":"round_float(sum(count_sum::field), 2)"}],"where":["target_addon_type::tag=\'ApiGateway\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_http"],"resultFilters":[{"alias":"Target Addon Type","field":"application_http-target_addon_type::tag","filter":{"operation":"=","value":"ApiGateway"},"key":"filterb105rFvK","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"typeQXtBniA6","type":"time"}],"valueDimensions":[{"aggregation":"sum","alias":"请求次数","field":"application_http-elapsed_count::field","key":"valueA2KagOZF","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"吞吐量"},"w":24,"x":0,"y":8},{"h":9,"i":"view-R1FREHx6","view":{"api":{"body":{"from":["application_http"],"groupby":["time()"],"select":[{"alias":"type336bqk8x","expr":"time()"},{"alias":"valueywTyWVde","expr":"round_float(avg(elapsed_mean::field), 2)"}],"where":["target_addon_type::tag=\'ApiGateway\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_http"],"resultFilters":[{"alias":"Target Addon Type","field":"application_http-target_addon_type::tag","filter":{"operation":"=","value":"ApiGateway"},"key":"filterj1hRfnyW","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"type336bqk8x","type":"time"}],"valueDimensions":[{"aggregation":"avg","alias":"平均延迟（ms）","field":"application_http-elapsed_mean::field","key":"valueywTyWVde","resultType":"number","type":"field","unit":{"type":"TIME","unit":"ns"}}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"响应时间"},"w":24,"x":0,"y":17}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("topology_node_mq","topology_node_mq","","micro_service","global","v2",'[{"h":10,"i":"view-kV69Moc4","view":{"api":{"body":{"from":["application_mq_service"],"groupby":["time()"],"select":[{"alias":"typeFxiuOiOf","expr":"time()"},{"alias":"valueYaLkGKG1","expr":"round_float(sum(count_sum::field), 2)"}],"where":["host::tag=\'{{host}}\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_mq_service"],"resultFilters":[{"alias":"主机","field":"application_mq_service-host::tag","filter":{"operation":"=","value":"{{host}}"},"key":"filter7m5S3zhY","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"typeFxiuOiOf","type":"time"}],"valueDimensions":[{"aggregation":"sum","alias":"请求次数","field":"application_mq_service-count_sum::field","key":"valueYaLkGKG1","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"isMoreThanOneDay":false,"noAreaColor":true,"nullDisplay":"--"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"吞吐量"},"w":24,"x":0,"y":0},{"h":10,"i":"view-raHXzLcO","view":{"api":{"body":{"from":["application_mq_service"],"groupby":["time()"],"select":[{"alias":"type6jWJnYDU","expr":"time()"},{"alias":"value4fg9lHMB","expr":"sum(elapsed_sum::field)/sum(count_sum::field)"}],"where":["host::tag=\'{{host}}\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_mq_service"],"resultFilters":[{"alias":"主机","field":"application_mq_service-host::tag","filter":{"operation":"=","value":"{{host}}"},"key":"filterZCeYWbcE","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"type6jWJnYDU","type":"time"}],"valueDimensions":[{"alias":"平均延迟(ms)","expr":"sum(elapsed_sum::field)/sum(count_sum::field)","key":"value4fg9lHMB","type":"expr","unit":{"type":"TIME","unit":"ns"}}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"isMoreThanOneDay":false,"noAreaColor":true,"nullDisplay":"--"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"响应时间"},"w":24,"x":0,"y":10}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("topology_node_other","topology_node_other","","micro_service","global","v2",'[{"h":10,"i":"view-kV69Moc4","view":{"api":{"body":{"from":["application_http_service"],"groupby":["time()"],"select":[{"alias":"typeFxiuOiOf","expr":"time()"},{"alias":"valueYaLkGKG1","expr":"round_float(sum(count_sum::field), 2)"}],"where":["host::tag=\'{{host}}\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_http_service"],"resultFilters":[{"alias":"主机","field":"application_http_service-host::tag","filter":{"operation":"=","value":"{{host}}"},"key":"filter7m5S3zhY","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"typeFxiuOiOf","type":"time"}],"valueDimensions":[{"aggregation":"sum","alias":"请求次数","field":"application_http_service-count_sum::field","key":"valueYaLkGKG1","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"isMoreThanOneDay":false,"noAreaColor":true,"nullDisplay":"--"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"吞吐量"},"w":24,"x":0,"y":0},{"h":10,"i":"view-raHXzLcO","view":{"api":{"body":{"from":["application_http_service"],"groupby":["time()"],"select":[{"alias":"type6jWJnYDU","expr":"time()"},{"alias":"value4fg9lHMB","expr":"sum(elapsed_sum::field)/sum(count_sum::field)"}],"where":["host::tag=\'{{host}}\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_http_service"],"resultFilters":[{"alias":"主机","field":"application_http_service-host::tag","filter":{"operation":"=","value":"{{host}}"},"key":"filterZCeYWbcE","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"type6jWJnYDU","type":"time"}],"valueDimensions":[{"alias":"平均延迟(ms)","expr":"sum(elapsed_sum::field)/sum(count_sum::field)","key":"value4fg9lHMB","type":"expr","unit":{"type":"TIME","unit":"ns"}}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"isMoreThanOneDay":false,"noAreaColor":true,"nullDisplay":"--"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"响应时间"},"w":24,"x":0,"y":10}]');
REPLACE
INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("topology_node_service","topology_node_service","","micro_service","global","v2",'[{"h":4,"i":"view-micro_service_overview","view":{"api":{"method":"get","query":{"end":"{{endTime}}","scope":"micro_service","serviceId":"{{serviceId}}","serviceName":"{{serviceName}}","start":"{{startTime}}","terminusKey":"{{terminusKey}}"},"url":"/api/apm/topology/service/overview"},"chartType":"card","config":{"dataSourceConfig":{"valueDimensions":[{"alias":"运行中实例","key":"running_instances","resultType":"number","type":"field"},{"alias":"已停止实例","key":"stopped_instances","resultType":"number","type":"field"},{"alias":"错误请求","key":"service_error_req_count","resultType":"number","type":"field"},{"alias":"服务异常","key":"service_exception_count","resultType":"number","type":"field"},{"alias":"告警次数","key":"alert_count","resultType":"number","type":"field"}]},"optionProps":{"isMoreThanOneDay":false}},"dataSourceType":"api","description":"","staticData":{},"title":"服务概览"},"w":24,"x":0,"y":0},{"h":8,"i":"view-service-request-translation","view":{"api":{"method":"get","query":{"end":"{{endTime}}","scope":"micro_service","serviceId":"{{serviceId}}","serviceName":"{{serviceName}}","start":"{{startTime}}","terminusKey":"{{terminusKey}}"},"url":"/api/apm/topology/service/requests"},"chartType":"table","config":{"dataSourceConfig":{"valueDimensions":[{"aggregation":"sum","alias":"事务类型","key":"requestType","resultType":"string","type":"field"},{"aggregation":"sum","alias":"调用次数","key":"requestCount","resultType":"number","type":"field"},{"aggregation":"avg","alias":"平均响应时间（ms）","key":"requestAvgTime","resultType":"number","type":"field"},{"alias":"错误率 (%)","key":"requestErrorRate","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isMoreThanOneDay":true,"moreThanOneDayFormat":"M/D"}},"dataSourceType":"api","description":"","staticData":null,"title":"事务分析"},"w":24,"x":0,"y":9},{"h":8,"i":"view-q9ybiy3z","view":{"api":{"body":{"from":["application_http"],"groupby":["time()"],"select":[{"alias":"typeRvHzWW3T","expr":"time()"},{"alias":"valueoTl2ugqu","expr":"round_float(sum(elapsed_count::field), 2)"}],"where":["target_service_name::tag=\'{{serviceName}}\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","filter__metric_scope_id":"{{terminusKey}}","filter_target_application_id":"{{applicationId}}","format":"chartv2","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/tmc/metrics-query"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_http"],"resultFilters":[{"alias":"目标服务名称","field":"application_http-target_service_name::tag","filter":{"operation":"=","value":"{{serviceName}}"},"key":"filterRpvruLuG","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"typeRvHzWW3T","type":"time"}],"valueDimensions":[{"aggregation":"sum","alias":"HTTP 请求次数","field":"application_http-elapsed_count::field","key":"valueoTl2ugqu","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"isConnectNulls":true,"isMoreThanOneDay":true,"noAreaColor":true,"nullDisplay":"--"}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"吞吐量"},"w":24,"x":0,"y":18}]');
REPLACE INTO `sp_dashboard_block_system` (`id`,`name`,`desc`,`scope`,`scope_id`,`version`,`view_config`) VALUES ("msp_overview","msp_overview","","micro_service","global","v2",'[{"h":5,"i":"view-project-count","view":{"api":{"extraData":null,"header":null,"method":"get","url":"/api/msp/tenant/project/overview"},"chartType":"card","config":{"dataSourceConfig":{"activedMetricGroups":[],"valueDimensions":[{"key":"projectCount","resultType":"number","type":"field"}]}},"dataSourceType":"api","description":"","staticData":null,"title":"项目数"},"w":6,"x":0,"y":0},{"h":5,"i":"view-workspace","view":{"api":{"extraData":null,"header":null,"method":"get","url":"/api/msp/tenant/project/overview"},"chartType":"card","config":{"dataSourceConfig":{"activedMetricGroups":[],"valueDimensions":[{"key":"workspaceCount","resultType":"number","type":"field"}]}},"dataSourceType":"api","description":"","staticData":null,"title":"环境"},"w":6,"x":6,"y":0},{"h":5,"i":"view-service-count","view":{"api":{"body":{"from":["application_service_node"],"select":[{"alias":"serviceCount","expr":"round_float(distinct(service_id::tag), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","format":"chartv2","project_key":"project_id","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/msp/metrics/tenant/project/overview"},"chartType":"card","config":{"dataSourceConfig":{"activedMetricGroups":["application_service_node"],"valueDimensions":[{"key":"serviceCount","resultType":"number","type":"field"}]}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"服务数"},"w":6,"x":12,"y":0},{"h":5,"i":"view-instance-count","view":{"api":{"body":{"from":["application_service_node"],"select":[{"alias":"serviceInstanceCount","expr":"round_float(distinct(service_instance_id::tag), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","format":"chartv2","project_key":"project_id","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/msp/metrics/tenant/project/overview"},"chartType":"card","config":{"dataSourceConfig":{"activedMetricGroups":["application_service_node"],"valueDimensions":[{"key":"serviceInstanceCount","resultType":"number","type":"field"}]}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"服务实例"},"w":6,"x":18,"y":0},{"h":10,"i":"view-alert","view":{"api":{"body":{"from":["error_alert"],"groupby":["time()"],"select":[{"alias":"type441teal6","expr":"time()"},{"alias":"valueynJmzYoH","expr":"round_float(sum(count::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","format":"chartv2","project_key":"project_id","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/msp/metrics/tenant/project/overview"},"chartType":"chart:bar","config":{"dataSourceConfig":{"activedMetricGroups":["error_alert"],"typeDimensions":[{"alias":"时间","key":"type441teal6","type":"time"}],"valueDimensions":[{"alias":"次数","key":"valueynJmzYoH","resultType":"number","type":"field"}]}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"告警趋势"},"w":15,"x":0,"y":6},{"h":10,"i":"view-hot-service","view":{"api":{"body":{"from":["application_http_service"],"groupby":["target_service_name::tag","target_project_id::tag"],"limit":5,"orderby":[{"dir":"DESC","expr":"sum(count_sum::field)"}],"select":[{"alias":"serviceId","expr":"target_service_id::tag"},{"alias":"projectId","expr":"target_project_id::tag"},{"alias":"serviceName","expr":"target_service_name::tag"},{"alias":"projectName","expr":"target_project_name::tag"},{"alias":"countSum","expr":"round_float(sum(count_sum::field), 2)"}]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","format":"chartv2","project_key":"target_project_id","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/msp/metrics/tenant/project/overview"},"chartType":"table","config":{"dataSourceConfig":{"activedMetricGroups":["application_http_service"],"limit":5,"valueDimensions":[{"alias":"服务名称","key":"serviceName","resultType":"number","type":"field"},{"alias":"所属项目","key":"projectName","resultType":"number","type":"field"},{"alias":"请求次数","key":"countSum","resultType":"number","type":"field"}]}},"controls":null,"dataSourceType":"api","description":"","staticData":null,"title":"热点服务"},"w":9,"x":16,"y":6},{"h":10,"i":"view-gateway","view":{"api":{"body":{"from":["application_http"],"groupby":["time()","req_host::tag"],"select":[{"alias":"typeQXtBniA6","expr":"time()"},{"alias":"reqHost","expr":"req_host::tag"},{"alias":"requestCount","expr":"round_float(sum(elapsed_count::field), 2)"}],"where":["target_addon_type::tag=\'ApiGateway\'"]},"extraData":null,"header":null,"method":"post","query":{"end":"{{endTime}}","epoch":"ms","filter__metric_scope":"micro_service","format":"chartv2","project_key":"gateway","ql":"influxql:ast","start":"{{startTime}}","type":"_"},"url":"/api/msp/metrics/tenant/project/overview"},"chartType":"chart:line","config":{"dataSourceConfig":{"activedMetricGroups":["application_http"],"resultFilters":[{"alias":"Target Addon Type","field":"application_http-target_addon_type::tag","filter":{"operation":"=","value":"ApiGateway"},"key":"filterb105rFvK","resultType":"string","type":"filter"}],"typeDimensions":[{"alias":"时间","key":"typeQXtBniA6","type":"time"},{"alias":"域名","field":"req_host::tag","key":"reqHost","resultType":"string","type":"field"}],"valueDimensions":[{"aggregation":"sum","alias":"请求次数","key":"requestCount","resultType":"number","type":"field"}]},"optionProps":{"invalidToZero":true,"noAreaColor":true}},"controls":null,"dataSourceType":"api","description":"","staticData":{},"title":"入口流量"},"w":24,"x":0,"y":12}]');
